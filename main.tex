\documentclass[12pt,reqno,a4paper]{amsart}

\usepackage{libertine}
\usepackage[libertine]{newtxmath}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[british]{babel}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage[mathscr]{euscript}
\usepackage{enumitem}
\usepackage{tikz-cd}
\usetikzlibrary{decorations.markings}
\usepackage{float}
\usepackage[backend=biber, style=alphabetic]{biblatex}
\setcounter{biburlnumpenalty}{7000}
\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\addbibresource{refs.bib}
\usepackage{hyperref}
\urlstyle{same}
\usepackage[noabbrev]{cleveref}

\theoremstyle{plain}
\newtheorem{thm}{Theorem}
\newtheorem*{thm*}{Theorem}
\newtheorem{lm}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{defnlm}[thm]{Definition-Lemma}
\newtheorem{exmp}[thm]{Example}
\newtheorem{xca}[thm]{Exercise}
\theoremstyle{remark}
\newtheorem{rem}[thm]{Remark}
\newtheorem{cav}{Caveat}
\Crefname{thm}{Theorem}{Theorems}
\Crefname{lm}{Lemma}{Lemmas}
\Crefname{prop}{Proposition}{Propositions}
\Crefname{cor}{Corollary}{Corollaries}
\Crefname{defn}{Definition}{Definitions}
\Crefname{defnlm}{Definition-Lemma}{Definition-Lemmas}
\Crefname{exmp}{Example}{Examples}
\Crefname{xca}{Exercise}{Exercises}
\Crefname{rem}{Remark}{Remarks}

\title[Talk on Sites and Topologies]{Talk on Sites and Topologies}
\author[Pedro N\'{u}\~{n}ez]{Pedro N\'{u}\~{n}ez}
\address{Pedro N\'{u}\~{n}ez \newline
\indent Albert-Ludwigs-Universit\"{a}t Freiburg, Mathematisches Institut \newline
\indent Ernst-Zermelo-Stra√üe 1, 79104 Freiburg im Breisgau (Germany)}
\email{\normalfont\href{mailto:pedro.nunez@math.uni-freiburg.de}{pedro.nunez@math.uni-freiburg.de}}
\renewcommand*{\urladdrname}{\itshape Homepage}
\urladdr{\normalfont\href{https://home.mathematik.uni-freiburg.de/nunez/?l=en}{https://home.mathematik.uni-freiburg.de/nunez}}
\thanks{The author gratefully acknowledges support by the DFG-Graduiertenkolleg GK1821 ``Cohomological Methods in Geometry'' at the University of Freiburg.}
\date{21st December 2021}

\sloppy
\makeatletter
\hypersetup{
  pdfauthor={\authors},
  pdftitle={\@title},
  colorlinks,
  linkcolor=[rgb]{0.2,0.2,0.6},
  citecolor=[rgb]{0.2,0.6,0.2},
  urlcolor=[rgb]{0.6,0.2,0.2}}
\makeatother

\begin{document}

\maketitle

\begin{abstract}
  Notes for a talk on Sites and Topologies as part of the seminar on Topos theory and Logic organized by Luca Terenzi at the University of Freiburg during the Winter Term 2021/2022.
\end{abstract}

\tableofcontents

%\begin{center}
%  \textcolor{gray}{---parts in gray will be omitted during the talk---}
%\end{center}

The main references for this talk are \cite{sga4} and \cite{stacks-project}.
I would like to thank Nicola Nesa for pointing out a mistake in a previous version of these notes!

\setcounter{section}{-1}

\section{Notation and conventions}

We will use the font $\mathbf{C}$, $\mathbf{D}$, ...~for categories and the font $\mathscr{F}$, $\mathscr{G}$, ...~for presheaves.
We will use the font $F$, $G$, ...~for functors which are not presheaves or which we are not interested in regarding as such.
We will use greek letters for natural transformations.
We will ignore most of the set theoretic issues.

We will sometimes depict categories as follows:~objects are bullet points, morphisms are arrows and identities are not depicted at all.
So for example
\begin{center}
  \begin{tikzcd}
    & \bullet \arrow{d} \\
    \bullet \arrow{r} & \bullet
  \end{tikzcd}
\end{center}
represents a category with three objects, three identity morphisms and two morphisms from two of the objects to the third object.
This determines the category up to isomorphism of categories, so we will sometimes talk about \textit{the} category represented by such a picture.

\begin{cav}
  Such a picture does not need to be a commutative diagram.
  More generally, a diagram will only be assumed to be commutative if we explicitly say so.
\end{cav}

Here is a list with some categories that we might use:
\begin{enumerate}
  \item The category $\mathbf{Set}$ of sets.
  \item The category $\mathbf{Set}_{*}$ of pointed sets.
  \item The category $\mathbf{Cat}$ of categories and functors.
  \item The category $\mathbf{Grp}$ of groups.
  \item The category $\mathbf{Ab}$ of abelian groups.
  \item The category $\mathbf{Ring}$ of commutative rings with one and ring homomorphisms sending one to one.
  \item If $R$ is a commutative ring with one, then we consider the categories $R$-$\mathbf{Mod}$ and $R$-$\mathbf{mod}$ of $R$-modules and finitely generated $R$-modules respectively.
  \item The category $\mathbf{Top}$ of topological spaces.
  \item The category $\mathbf{Top}_{*}$ of pointed topological spaces.
  \item The category $\mathbf{Sch}$ of schemes and its full subcategory $\mathbf{Aff}$ of affine schemes.
  \item If $\mathbf{C}$ is a category and $X$ is an object in $\mathbf{C}$, then $\mathbf{C}_{X}$ is the category of objects in $\mathbf{C}$ over $X$, whose objects are morhpisms $Y \to X$ in $\mathbf{C}$ and whose morphisms are morphisms $Y \to Y'$ in $\mathbf{C}$ making the corresponding triangle commute.
  \item If $\mathbf{C}$ and $\mathbf{D}$ are two categories, then $\mathbf{Fun}(\mathbf{C},\mathbf{D})$ is the category of functors between them, with morphisms given by natural transformations.
  \item If $\mathbf{C}$ is a category, then $\mathbf{C}^{\mathrm{op}}$ denotes its opposite category.
  \item If $\mathbf{C}$ is a category, then $\mathbf{PSh}(\mathbf{C}):= \mathbf{Fun}(\mathbf{C}^{\mathrm{op}},\mathbf{Set})$ is the category of presheaves on $\mathbf{C}$.
  \item If $X$ is a topological space, then $\mathbf{Op}(X)$ denotes the category corresponding to the partially ordered set of open subsets of $X$ and $\mathbf{PSh}(X) := \mathbf{PSh}(\mathbf{Op}(X))$ denotes the corresponding category of presheaves.
\end{enumerate}

\section{Recollections from previous talks}

\subsection{Limits}

The limit construction takes as input a bunch of objects and morphisms between them in some category $\mathbf{C}$ and gives as an output a new object together with compatible morphisms to each of the previous objects having a nice universal property, which we can think of as this object being the largest possible object with such properties.
We need to make a few things precise here:

\begin{enumerate}
  \item Let us start by making the sentence ``a bunch of objects and morphisms between them in some category $\mathbf{C}$'' precise.
    We want to consider something like
    \begin{center}
      \begin{tikzcd}
        & B \arrow{d} \\
        C \arrow{r} & A
      \end{tikzcd}
    \end{center}
    or maybe something without any morphisms like
    \begin{center}
      \begin{tikzcd}
        A & B
      \end{tikzcd}
    \end{center}
    or maybe even something without anything at all.
    We can make this notion precise using set theoretic language, e.g., a set of objects in $\mathbf{C}$ and a set of objects and a set of morphisms between them.
    But we want to make this notion precise using categorical language instead.
    A neat way to do this is by considering such a bunch of objects and morphisms in $\mathbf{C}$ as the image of a functor from some other category.
    This leads to the notion of a \textit{diagram} in $\mathbf{C}$, which is simply a functor $F \colon \mathbf{I} \to \mathbf{C}$.
    The previous three examples would correspond to taking $\mathbf{I}$ as the category
    \begin{center}
      \begin{tikzcd}
        & \bullet \arrow{d} \\
        \bullet \arrow{r} & \bullet
      \end{tikzcd}
    \end{center}
    or the category $(\bullet \quad \bullet)$ or the empty category respectively.

    So the input of the limit construction is a diagram, i.e., a functor.
  \item Let us discuss the sentence ``a new object together with compatible morphisms to each of the previous objects'' now.
    Given a diagram $F \colon \mathbf{I} \to \mathbf{C}$ in $\mathbf{C}$, we want its limit to be an object in $\mathbf{C}$ together with morphisms to  each object in the diagram making this new diagram commute when starting from this object.
    Again, we could make this precise using set theory, but it is more natural to continue using categorical language instead.
    A way to phrase this in categorical terms is using the notion of a \textit{cone} over the diagram $F$.
    We first define the auxiliary category $C(\mathbf{I})$ as the category obtained from adding a new object to $\mathbf{I}$ (together with the corresponding identity morphism) and adding a single morphism from this new object to every object in the old category $\mathbf{I}$.
    We can compose these new morphisms with the old ones, but since we have only added a single morphism from the new object to each old object, every composition starting from the new object and finishing in some other object has to agree and be equal to the single morphism that we added.
    A \textit{cone} over $F$ is then a diagram $C \colon C(\mathbf{I}) \to \mathbf{C}$ that restricts to $F$ over the full subcategory $\mathbf{I} \subseteq C(\mathbf{I})$.
    Explicitly, such a cone consists of a new diagram obtained from the old one by adding a new object $V$ and a new morphism from $V$ to every object in the old diagram in such a way that this new diagram commutes when starting from $V$.
    We can picture this by putting the old diagram in a horizontal plane (this would be the base of the cone) and placing $V$ above it (this would be the vertex of the cone):
    \begin{center}
      \begin{tikzcd}
        & &[-10mm] V \arrow{dl} \arrow[bend right=30]{ddll} \arrow{ddr} \arrow[bend left=20]{drr} & &[-10mm] \\
        & A \arrow{dl} \arrow{rrr} & & & B \\
        C \arrow[shift left=1, bend left=5]{rrr} \arrow[shift right=1, bend right=5]{rrr} & & & D &
      \end{tikzcd}
    \end{center}
    We stress again that this diagram is only supposed to commute when starting from $V$; for example, the two arrows $C \to D$ need not be equal.
    
    So the output of the limit construction is a cone over the input diagram, i.e., a new diagram which we can picture as a cone having the old diagram as a base.
  \item Finally, let us make the sentence ``the largest possible object with such properties'' precise.
    This is arguably the most imprecise sentence in our initial description and yet the most important part of the concept of limit.
    Cones over $F$ form a category, namely, the subcategory of the category of functors $\mathbf{Fun}(C(\mathbf{I}),\mathbf{C})$ whose objects are functors that restrict to $F$ over $\mathbf{I} \subseteq C(\mathbf{I})$ and whose morphisms are the natural transformations that restrict to the identity on $F$, meaning that the component at each object of $\mathbf{I} \subseteq C(\mathbf{I})$ is the identity on the image of the corresponding object under $F$.
    We can picture this by drawing the common base of the two cones as a single base, as shown in the following picture:
    \begin{center}
      \begin{tikzcd}
        V \arrow[bend left=10]{rrrrrr} \arrow{ddr} \arrow{drr} \arrow[bend right=15]{ddrrrr} \arrow{drrrrr} & & &[-10mm] & &[-10mm] & V' \arrow{llllldd} \arrow{lllld} \arrow{dl} \arrow[bend left=30]{ddll} \\
         & & A \arrow[shift right=1, bend right=20]{dl} \arrow[shift right=2, bend right=15]{rrr} & & & B & \\
         & C \arrow[shift right=1, bend right=20]{rrr} \arrow[shift right=3, bend right=30]{rrr} & & & D & &
      \end{tikzcd}
    \end{center}
    Again, this diagram is only supposed to commute starting from $V$ and starting from $V'$.
    
    So we have a category $\mathbf{Cones}(F)$ of cones over our diagram $F$.
    The limit of $F$, if it exists, is precisely a terminal cone, i.e., a terminal object in the category $\mathbf{Cones}(F)$.
    The reason to have used the word ``largest'' in our informal description is two-fold.
    On the one hand, we can think of a partially ordered set as a category having the same set of objects, in which there is a morphism $x \to y$ if and only if $x \leq y$.
    If this poset has a largest element, then this element is a terminal object in the corresponding category.
    More generally, the categorical product (which is a particular case of limit) of a subset of this poset, if it exists, corresponds to the infimum of this subset, which is the largest lower bound of all the elements in the subset.
    On the other hand, one can intuitively think of limits as subobjects and colimits as quotient objects, because this is indeed a possible way to construct limits and colimits in many familiar categories, e.g., in the category of sets, in which the limit can be constructed as a suitable subset of the product of all sets in the diagram.
\end{enumerate}

\begin{rem}
  Let $\mathbf{C}$ be a category in which all limits exist, meaning that for all $\mathbf{I}$ and all $F \colon \mathbf{I} \to \mathbf{C}$ the limit $\lim(F)$ exists.
  Then, for every category $\mathbf{I}$, we have a functor
  \[ \lim_{\mathbf{I}} \colon \mathbf{Fun}(\mathbf{I}, \mathbf{C}) \to \mathbf{C}. \]
  This functor is right adjoint to the functor
  \[ \operatorname{const}_{(-)} \colon \mathbf{C} \to \mathbf{Fun}(\mathbf{I}, \mathbf{C}) \]
  sending an object $X$ in $\mathbf{C}$ to the functor sending every object in $\mathbf{I}$ to $X$ and every morphism in $\mathbf{I}$ to the identity on $X$.
  In particular, the functor $\operatorname{lim}_{\mathbf{I}}$ preserves limits.
\end{rem}

\begin{exmp}[Terminal objects]
  Let $\mathbf{C}$ a category and let $\mathbf{I} = \varnothing$ be the empty category and $\varnothing \colon \varnothing \to \mathbf{C}$ the empty functor.
  Then $\lim(\varnothing)$ is a terminal object in $\mathbf{C}$.
  Examples of terminal objects include:
  \begin{enumerate}
    \item A singleton $\{ * \}$ in the categories $\mathbf{Set}$, $\mathbf{Set}_{*}$, $\mathbf{Cat}$, $\mathbf{Top}$, $\mathbf{Top}_{*}$, $\mathbf{Grp}$, $\mathbf{Ab}$, $\mathbf{Ring}$, $R$-$\mathbf{Mod}$, $R$-$\mathbf{mod}$, ... (with the corresponding structure on $\{ * \}$ omitted in each case).
    \item $\operatorname{Spec}(\mathbb{Z})$ in $\mathbf{Sch}$ and in $\mathbf{Aff}$.
    \item $X$ in $\mathbf{C}_{X}$.
    \item $X$ in $\mathbf{Op}(X)$.
    \item $\varnothing$ in $\mathbf{Set}^{\mathrm{op}}$.
    \item The constant presheaf with value $\{ * \}$ in $\mathbf{PSh}(\mathbf{C})$.
  \end{enumerate}
  Some categories in which terminal objects to do not exist include:
  \begin{enumerate}
    \item The subcategory of $\mathbf{Set}$ consisting of infinite sets.
    \item The category $\mathbf{Aff}_{S}$ of affine schemes over a non-affine scheme $S$.
    \item Any set with more than one element regarded as a category with only the identities as morphisms.
    \item The partially ordered set of finite subsets of an infinite set.
    \item The totally ordered set $(\mathbb{R},\leq)$.
  \end{enumerate}
\end{exmp}

\begin{exmp}[Binary products]
  Let $\mathbf{C}$ be a category and let $\mathbf{I}$ be the category $(\bullet \quad \bullet)$.
  We consider a diagram $F \colon \mathbf{I} \to \mathbf{C}$, which then consists of two objects $A$ and $B$ in $\mathbf{C}$ without any morphisms between them.
  Then $\lim(F)$ is a product $A \times B$ in $\mathbf{C}$, that is, an ojbect $A \times B$ in $\mathbf{C}$ with morphisms $A \times B \to A$ and $A \times B \to B$ such that for every other object $T$ in $\mathbf{C}$ admitting morphisms to $A$ and to $B$ in $\mathbf{C}$ there exists a unique morphism $T \to A \times B$ making the corresponding diagram commute.
  In a picture:
  \begin{center}
    \begin{tikzcd}
      & T \arrow[dashed]{d}{\exists !} \arrow[bend right=30]{ddl} \arrow[bend left=30]{ddr} & \\
      & A \times B \arrow{dl} \arrow{dr} & \\
      A & & B
    \end{tikzcd}
  \end{center}
  Examples of binary products include:
  \begin{enumerate}
    \item The cartesian product $A \times B$ (with the corresponding projections) in $\mathbf{Set}$, $\mathbf{Set}_{*}$, $\mathbf{Cat}$, $\mathbf{Top}$, $\mathbf{Top}_{*}$, $\mathbf{Grp}$, $\mathbf{Ab}$, $\mathbf{Ring}$, $R$-$\mathbf{Mod}$, $R$-$\mathbf{mod}$, ... (again omitting the induced structure on $A \times B$ in each case).
    \item The intersection $A \cap B$ in $\mathbf{Op}(X)$.
    \item The infimum $\operatorname{inf}\{ A, B\}$ in a partially ordered set (if it exists).
    \item The disjoint union $A \sqcup B$ in $\mathbf{Set}^{\mathrm{op}}$.
    \item The point-wise product
      \[ U \mapsto \mathscr{F}(U) \times \mathscr{G}(U) \]
      in $\mathbf{PSh}(\mathbf{C})$.
    \item The tensor product $A \otimes B$ (over $\mathbb{Z}$) in $\mathbf{Ring}^{\mathrm{op}}$.
    \item The spectrum of the tensor product of coordinate rings in $\mathbf{Aff}$, i.e.,
      \[ \operatorname{Spec}(A) \times \operatorname{Spec}(B) = \operatorname{Spec}(A \otimes B). \]
    \item The scheme $X \times Y$ obtained from $X$ and $Y$ by gluing the product of affine open subschemes.
  \end{enumerate}
  Some categories in which binary products do not always exist include:
  \begin{enumerate}
    \item The binary product of two sets with $5$ elements in the category of sets with at most $5$ elements does not exist.
    \item Any set with more than one element regarded as a category with only the identities as morhpisms does not have any binary products except the product of each object with itself.
  \end{enumerate}
\end{exmp}

\begin{exmp}[Products]
  Let $\mathbf{C}$ be a category and let $I$ now be a set regarded as a category with only the identities as morphisms.
  The limit of a diagram $F \colon I \to \mathbf{C}$ is then a product indexed by $I$; this time we don't spell out the universal property and jump straight to the examples.
  Examples of products include:
  \begin{enumerate}
    \item The cartesian product $\prod_{i \in I} A_{i}$ in $\mathbf{Set}$, $\mathbf{Set}_{*}$, $\mathbf{Cat}$, $\mathbf{Top}$, $\mathbf{Top}_{*}$, $\mathbf{Grp}$, $\mathbf{Ab}$, $\mathbf{Ring}$, $R$-$\mathbf{Mod}$, ... (again, we don't make precise the induced structure in each case).
    \item The point-wise product
      \[ U \mapsto \prod_{i \in I} \mathscr{F}_{i}(U) \]
      in $\mathbf{PSh}(\mathbf{C})$.
    \item The infimum $\operatorname{inf}_{i \in I} \{ a_{i} \}$ of a bounded-below collection of numbers in $(\mathbb{R}, \leq)$.
  \end{enumerate}
  Some examples of situations in which products do not exist include:
  \begin{enumerate}
    \item The product of infinitely many sets each containing more than one element does not exist in the category of finite sets.
    \item The product of infinitely many positive dimensional $k$-vector spaces does not exist in $k$-$\mathbf{mod}$.
    \item The product of the diagram $\mathbb{N} \to \mathbf{Op}(\mathbb{R}), n \mapsto (-1/n,1/n)$ does not exist in $\mathbf{Op}(\mathbb{R})$.
    \item Let $(a_{n})_{n \in \mathbb{N}}$ be a decreasing sequence of rational numbers converging to $\pi \in \mathbb{R}$.
      Then the product $\operatorname{inf}_{n \in \mathbb{N}} \{ a_{n} \}$ does not exist in $(\mathbb{Q}, \leq)$.
  \end{enumerate}
\end{exmp}

\begin{exmp}[Equalizers]
  Let $\mathbf{C}$ be a category and let $\mathbf{I}$ be the category $(\bullet \rightrightarrows \bullet)$.
  A diagram $F \colon \mathbf{I} \to \mathbf{C}$ corresponds to the data of two parallel morphisms $f \colon A \to B$ and $g \colon A \to B$, and its limit is called the equalizer of $f$ and $g$, denoted $\operatorname{Eq}(f,g)$.
  The universal property of the equalizer can be pictured as follows:
  \begin{center}
    \begin{tikzcd}
      & T \arrow[swap, dashed, bend right=30]{dl}{\exists !} \arrow{d} \arrow[bend left=30]{dr} & & \\
      \operatorname{Eq}(f,g) \arrow{r} & A \arrow[shift left=1]{r}{f} \arrow[swap, shift right=1]{r}{g} & B
    \end{tikzcd}
  \end{center}
  Examples of equalizers include:
  \begin{enumerate}
    \item The subset $\{ a \in A \mid f(a) = g(b) \}$ (with the corresponding inclusion) in $\mathbf{Set}$, $\mathbf{Set}_{*}$, $\mathbf{Cat}$, $\mathbf{Top}$, $\mathbf{Top}_{*}$, $\mathbf{Grp}$, $\mathbf{Ab}$, $\mathbf{Ring}$, $R$-$\mathbf{Mod}$, $R$-$\mathbf{mod}$, ... (as usual we don't make precise the induced structure in each case).
    \item We have $\operatorname{Eq}(0,f) = \operatorname{Ker}(f)$ in $\mathbf{Grp}$, $\mathbf{Ab}$, $R$-$\mathbf{Mod}$ and $R$-$\mathbf{mod}$.
    \item The point-wise equalizer
      \[ U \mapsto \{ s \in \mathscr{F}(U) \mid f_{U}(s) = g_{U}(s) \} \]
      in $\mathbf{PSh}(\mathbf{C})$.
  \end{enumerate}
  Some examples in which equalizers do not exist include:
  \begin{enumerate} 
    \item The equalizer of $(\bullet \rightrightarrows \bullet)$ does not exist in $\mathbf{I}$ itself.
    \item The equalizer of two morphisms $f, g \colon X \to Y$ which agree only on a finite subset of $X$ does not exist in the category of infinite sets.
  \end{enumerate}
\end{exmp}

\begin{xca}
  Let $\mathbf{C}$ be a category and let $f, g \colon A \rightrightarrows B$ be parallel arrows in $\mathbf{C}$ such that $\operatorname{Eq}(f,g)$ exists in $\mathbf{C}$.
  Show that the morphism $\operatorname{Eq}(f,g) \to A$ is a monomorhpism in $\mathbf{C}$.
\end{xca}

\subsection{Fiber products}

These are particular cases of limits, but they will be so relevant later on that they deserve their own subsection.
We take $\mathbf{I}$ to be the category
\begin{center}
  \begin{tikzcd}
    & \bullet \arrow{d} \\
    \bullet \arrow{r} & \bullet
  \end{tikzcd}
\end{center}

The limit of a diagram $F \colon \mathbf{I} \to \mathbf{C}$ is called a \textit{fiber product} in $\mathbf{C}$.
Before looking at particular examples, let us introduce some notation and terminology around fiber products.
Consider two morphisms $f \colon B \to A$ and $g \colon C \to A$ in $\mathbf{C}$.
Their fiber product is denoted by $B \times_{A} C$.
If we need to be precise about the morphisms $f$ and $g$, we can also use the notation $B \times_{f,A,g} C$.
By definition of the limit, the fiber product $B \times_{A} C$ comes with two projections $p_{1} \colon B \times_{A} C \to B$ and $p_{2} \colon B \times_{A} C \to C$ which fit into a commutative diagram as follows:
\begin{center}
  \begin{tikzcd}
    B \times_{A} C \arrow[swap]{d}{p_{1}} \arrow{r}{p_{2}} & C \arrow{d}{g} \\
    B \arrow[swap]{r}{f} & A
  \end{tikzcd}
\end{center}
Such a diagram is sometimes called a \textit{cartesian square}, and it satisfies a universal property which can be pictured as follows:
\begin{center}
  \begin{tikzcd}
    T \arrow[bend left=30]{drr} \arrow[bend right=30]{ddr} \arrow[dashed]{dr}{\exists !} & & \\
    & B \times_{A} C \arrow[swap]{d}{p_{1}} \arrow{r}{p_{2}} & C \arrow{d}{g} \\
    & B \arrow[swap]{r}{f} & A
  \end{tikzcd}
\end{center}
Spelled out, this means that if the outer (deformed) square commutes, then there exists a unique arrow (the dashed arrow) making the whole diagram commute.

\begin{rem}\label{rem:cartesian}
  If we say that the diagram
  \begin{center}
    \begin{tikzcd}
      D \arrow[swap]{d}{q_{1}} \arrow{r}{q_{2}} & C \arrow{d}{g} \\
      B \arrow[swap]{r}{f} & A
    \end{tikzcd}
  \end{center}
  is cartesian, we mean that it commutes and it has the previously discussed universal property, which in turn implies that there exists an isomorhpism $h\colon D \to B \times_{A} C$ such that $q_{1} = p_{1} \circ h$ and $q_{2} = p_{2} \circ h$.
  Limits are only unique up to isomorphism anyway, so we are running around a bit in circles here; but in practice we usually have an explicit construction of $B \times_{A} C$ in mind, and such a $D$ may not be explicitly given like that.
\end{rem}

Cartesian diagrams are sometimes marked as
\begin{center}
  \begin{tikzcd}
    D \arrow[phantom, "\square"]{dr} \arrow[swap]{d}{q_{1}} \arrow{r}{q_{2}} & C \arrow{d}{g} \\
    B \arrow[swap]{r}{f} & A
  \end{tikzcd}
\end{center}
or sometimes also as
\begin{center}
  \begin{tikzcd}
    D \arrow[phantom, "\lrcorner"]{dr} \arrow[swap]{d}{q_{1}} \arrow{r}{q_{2}} & C \arrow{d}{g} \\
    B \arrow[swap]{r}{f} & A
  \end{tikzcd}
\end{center}
A mnemonic to remember the orientation of the symbol in the middle is that the two sides of the right angle are pointing to the two morphisms which were given by the universal property of the limit.
This notation avoids confusion with the dual notion of a \textit{pushout square}, in which the two arrows created by the universal property of the colimit would be the ones pointing towards the bottom right object.

\begin{xca}[Pasting lemma]
  Let $\mathbf{C}$ be a category.
  Consider a commutative diagram as follows:
  \begin{center}
    \begin{tikzcd}
      A \arrow{d} \arrow{r} & B \arrow[phantom, "\lrcorner"]{dr} \arrow{d} \arrow{r} & C \arrow{d} \\
      D \arrow{r} & E \arrow{r} & F
    \end{tikzcd}
  \end{center}
  Then the left square is cartesian if and only if the outer rectangle is cartesian.
  As a corollary we have the formula
  \[ (X \times_{Y} Z) \times_{Z} W \cong X \times_{Y} W. \]
  The similarity with the formula
  \[ (R \otimes_{S} S') \otimes_{S'} T \cong R \otimes_{S} T \]
  is no coincidence, as hinted at by one of the previous examples (using the equivalence between $\mathbf{Aff}^{\mathrm{op}}$ and $\mathbf{Ring}$).
\end{xca}

Moving on to some more terminology.
There are many situations in which we are working over a given object as our base.
For example, vector bundles over a topological space, schemes over another scheme, covering spaces over a topological space...
If we are working over an object $A$ in $\mathbf{C}$ and we have a morphism $f \colon B \to A$ in $\mathbf{C}$, we are sometimes interested in using this morphism as a \textit{base change} morphism and start working over $B$ instead.
In this situation we can say that $q_{1} \colon D \to B$ is the \textit{pull back} of $g \colon C \to A$ under $f$.

Let $\mathbf{P}$ be a property of morphisms in a category $\mathbf{C}$.
We say that the property $\mathbf{P}$ is \textit{stable under pull back} if the following holds:~for all cartesian squares
\begin{center}
  \begin{tikzcd}
    D \arrow[phantom, "\lrcorner"]{dr} \arrow[swap]{d}{q_{1}} \arrow{r}{q_{2}} & C \arrow{d}{g} \\
    B \arrow[swap]{r}{f} & A
  \end{tikzcd}
\end{center}
in $\mathbf{C}$, $g$ has $\mathbf{P}$ implies that $q_{1}$ has $\mathbf{P}$.
In the last talk, Tanuj sketched the proof that ``being an isomorphism'' is stable under pull back.
The same is true for monomorphisms, but not necessarily true for epimorphisms.

\begin{rem}
  A comprehensive list of properties of morphisms which are stable under pull back in algebraic geometry can be found in \cite[Appendix C]{gw10}.
\end{rem}

Let us finally come to particular examples of fiber products.
We want to abstract the theory of sheaves on topological spaces into a theory of sheaves on categories, so let us focus on the category $\mathbf{Top}$ for the remaining of this subsection.

Let $f \colon Y \to X$ and $g \colon Z \to X$ be two continuous maps between topological spaces.
Then their fiber product can be constructed as
\[ Y \times_{X} Z = \{ (y,z) \in Y \times Z \mid f(y) = g(z) \}. \]
This set is endowed with the subspace topology and the projections $p_{1} \colon Y \times_{X} Z \to Y$ and $p_{2} \colon Y \times_{X} Z \to Z$ are the restrictions of the projections from the cartesian product.

\begin{exmp}\label{exmp:preimage}
  Let $X$ be a topological space and let $i \colon U \to X$ be the inclusion of an open subset.
  Let $f \colon Y \to X$ be a continuous map.
  Then:
  \begin{center}
    \begin{tikzcd}
      f^{-1}(U) \arrow[phantom, "\lrcorner"]{dr} \arrow[hookrightarrow]{r} \arrow[swap]{d}{f|_{f^{-1}(U)}} & Y \arrow{d}{f} \\
      U \arrow[hookrightarrow]{r} & X
    \end{tikzcd}
  \end{center}
  Note that $f^{-1}(U)$ is not equal to the fiber product as described above, cf.~\Cref{rem:cartesian}.
\end{exmp}

A particular example of the previous example is the following:

\begin{exmp}
  Let $X$ be a topological space and let $i \colon U \to X$ and $j \colon V \to X$ be inclusions of two open subsets.
  Then:
  \begin{center}
    \begin{tikzcd}
      U \cap V \arrow[phantom, "\lrcorner"]{dr} \arrow[hookrightarrow]{r} \arrow[hookrightarrow]{d} & V \arrow[hookrightarrow]{d} \\
      U \arrow[hookrightarrow]{r} & X
    \end{tikzcd}
  \end{center}
  Again, cf.~\Cref{rem:cartesian}.
\end{exmp}

\begin{exmp}\label{exmp:fiber}
  Let $X$ be a topological space and let $i \colon \{ * \} \to X$ be a map, which corresponds to picking a point $i(*) \in X$.
  Let $f \colon Y \to X$ be a continuous map.
  Then:
  \begin{center}
    \begin{tikzcd}
      f^{-1}(i(*)) \arrow[phantom, "\lrcorner"]{dr} \arrow{r} \arrow[hookrightarrow]{d} & \{ * \} \arrow{d}{i} \\
      Y \arrow[swap]{r}{f} & X
    \end{tikzcd}
  \end{center}
\end{exmp}

\begin{exmp}
  Let $X$ be a topological space and let $p \colon E \to X$ be a vector bundle on $X$.
  Let $f \colon Y \to X$ be a continuous map.
  Then we define the pull back $f^{*}E \to Y$ of $E$ along $f$ as
  \begin{center}
    \begin{tikzcd}
      f^{*}E \arrow[phantom, "\lrcorner"]{dr} \arrow{d} \arrow{r} & E \arrow{d}{p} \\
      Y \arrow[swap]{r}{f} & X
    \end{tikzcd}
  \end{center}
  The morphism $f^{*}E \to Y$ is a vector bundle on $Y$ and the fiber of $f^{*}E \to Y$ over a point $y \in Y$ is isomorphic (I really want to say ``the same'' here) as the fiber of $E \to X$ over $f(y)$.
\end{exmp}

\begin{exmp}
  Let $X$ be a connected topological space and let $p \colon \tilde{X} \to X$ be a covering space.
  Let's say it is a 7-sheeted covering space, i.e., each fiber has exactly 7 points.
  Then $p^{*}\tilde{X} \to \tilde{X}$ is again a 7-sheeted covering of $\tilde{X}$, so the composition $p^{*}\tilde{X} \to X$ is a 49-sheeted covering of $X$.
\end{exmp}

\begin{xca}
  The homotopy lifting property is stable under pull back in $\mathbf{Top}$, i.e., the pull back of a Hurewicz fibration is again a Hurewicz fibration.
\end{xca}

\begin{exmp}
  Let $\mathbf{C}$ be a category with a terminal object $T$ and let $A$ and $B$ be objects in $\mathbf{C}$.
  Then:
  \begin{center}
    \begin{tikzcd}
      A \times B \arrow[phantom, "\lrcorner"]{dr} \arrow{r} \arrow{d} & B \arrow{d} \\
      A \arrow{r} & T
    \end{tikzcd}
  \end{center}
  This applies for instance to $\mathbf{C} = \mathbf{Top}$ with $T = \{ * \}$.
\end{exmp}

\begin{xca}
  Construct the fiber product of a diagram
  \begin{center}
    \begin{tikzcd}
      & C \arrow{d} \\
      B \arrow{r} & A
    \end{tikzcd}
  \end{center}
  of sets using only products and equalizers.
  (There is nothing special about the category of sets nor about the fiber product; we've already seen in previous talks that this can be done for every kind of limit in any category.
  But the computations are simpler in this case.)
\end{xca}

\subsection{The Yoneda embedding}

Let $\mathbf{C}$ be a category and let $X$ be an object in $\mathbf{C}$.
We denote by $h_{X}$ the presheaf
\[ Y \mapsto h_{X}(Y) := \operatorname{Hom}(Y,X) \]
with restriction morphisms $h_{X}(f) = (-) \circ f$.
If $f \colon X \to Y$ is a morphism in $\mathbf{C}$, then we obtain a morphism $h_{f} \colon h_{X} \to h_{Y}$ given by $f \circ (-)$.
In this way we obtain a functor
\[ h \colon \mathbf{C} \to \mathbf{PSh}(\mathbf{C}), \]
and as a consequence of the Yoneda lemma we know that this is a fully faithful functor.
This means that we may as well think of the object $X$ as the presheaf $h_{X}$, and we do not lose any information by doing so.

Suppose that we have now a diagram
\begin{center}
  \begin{tikzcd}
    & Z \arrow{d} \\
    Y \arrow{r} & X
  \end{tikzcd}
\end{center}
in $\mathbf{C}$.
It may well happen that the fiber product $Y \times_{X} Z$ does not exist in $\mathbf{C}$.
But we have seen in previous talks that limits of presheaves always exist and can be computed point-wise, so the fiber product $h_{Y} \times_{h_{X}} h_{Z}$ does exist in $\mathbf{PSh}(\mathbf{C})$.
Explicitly, this is the presheaf given on objects by
\[ T \mapsto \operatorname{Hom}(T,Y) \times_{\operatorname{Hom}(T,X)} \operatorname{Hom}(T,Z). \]
The fiber product $Y \times_{X} Z$ exists in $\mathbf{C}$ if and only if this presheaf is representable, i.e., if there exists an object $L$ in $\mathbf{C}$ such that $h_{L} \cong h_{Y} \times_{h_{X}} h_{Z}$.
Spelling out the definitions we see that in this case such an object $L$ is necessarily a fiber product $Y \times_{X} Z$.

\begin{cav}
  From now on we may allow ourselves a slight abuse of terminology and notation and think and talk about an object $X$ in a category $\mathbf{C}$ as if it was really the same as the corresponding presheaf $h_{X}$.
  So we may say stuff like ``the fiber product $Y \times_{X} Z$ is representable'' instead of saying ``the fiber product $Y \times_{X} Z$ exists''.
  Forcing ourselves to have this flexibility may make some of the upcoming concepts more natural.
\end{cav}

\subsection{Pretopologies}

Let $X$ be a topological space and let $\mathscr{F}$ be a presheaf on $X$.
Let $U$ be an open subset of $X$ and let $\{U_{i}\}_{i \in I}$ be an open covering of $U$.
First define a morphism
\begin{align*}
  \rho \colon \mathscr{F}(U) & \to \prod_{i \in I} \mathscr{F}(U_{i}) \\
  s & \mapsto (s|_{U_{i}})_{i \in I}
\end{align*}
induced by each restriction morphism $\rho^{U}_{U_{i}} \colon \mathscr{F}(U) \to \mathscr{F}(U_{i}), s \mapsto s|_{U_{i}}$ and the universal property of the product.
Next we want to restrict each family of sections $(s_{i})_{i \in I}$ in $\prod_{i \in I} \mathscr{F}(U_{i})$ to the intersections $U_{i} \cap U_{j}$.
There are two ways to do this.
The first one corresponds to the morphism
\begin{align*}
  \sigma_{1} \colon \prod_{i \in I} \mathscr{F}(U_{i}) & \to \prod_{(i, j) \in I \times I} \mathscr{F}(U_{i} \cap U_{j}) \\
  (s_{i})_{i \in I} & \mapsto \left(\rho^{U_{i}}_{U_{i} \cap U_{j}}(s_{i})\right)_{(i, j) \in I \times I},
\end{align*}
and the second one corresponds to the morphism
\begin{align*}
  \sigma_{2} \colon \prod_{i \in I} \mathscr{F}(U_{i}) & \to \prod_{(i, j) \in I \times I} \mathscr{F}(U_{i} \cap U_{j}) \\
  (s_{i})_{i \in I} & \mapsto \left(\rho^{U_{j}}_{U_{i} \cap U_{j}}(s_{j})\right)_{(i, j) \in I \times I}.
\end{align*}
The presheaf $\mathscr{F}$ is a sheaf if and only if for every $U$ and every open cover $\{U_{i}\}_{i \in I}$ the diagram
\begin{center}
  \begin{tikzcd}
    \mathscr{F}(U) \arrow{r}{\rho} & \prod_{i \in I} \mathscr{F}(U_{i}) \arrow[shift left=2]{r}{\sigma_{1}} \arrow[swap, shift right=2]{r}{\sigma_{2}} & \prod_{(i, j) \in I \times I} \mathscr{F}(U_{i} \cap U_{j})
  \end{tikzcd}
\end{center}
is exact, meaning that the left arrow is an equalizer of the two parallel arrows on the right.
We will refer to this as the \textit{sheaf condition} with respect to the open cover $\{ U_{i} \}_{i \in I}$.

In order to state the sheaf condition we had to use the notion of an open cover of an open subset in $X$ and we needed to consider intersections of elements in the open cover as well.
So we were looking at open covers of objects in $\mathbf{Op}(X)$ and we were considering fiber products of elements of the cover.
We axiomatize the relevant properties of open covers in order to make sense of the sheaf condition in arbitrary categories other than $\mathbf{Op}(X)$ for a topological space $X$.

In particular, we will need to assume the existence of fiber products.
So it is convenient to introduce the following definition first:

\begin{defn}[Quarrable morphism]
  Let $\mathbf{C}$ be a category.
  A morphism $f \colon X \to Y$ in $\mathbf{C}$ is called \textit{quarrable} if for every morphism $Z \to Y$ in $\mathbf{C}$ the fiber product $X \times_{Y} Z$ is representable.
\end{defn}

We are now in a more comfortable position to introduce the following:

\begin{defn}[Pretopology]
  Let $\mathbf{C}$ be a category.
  A \textit{pretopology} on $\mathbf{C}$ consists of the data, for each object $X$ in $\mathbf{C}$, of a set $\operatorname{Cov}(X)$ of sets $\{ X_{i} \to X \}_{i \in I}$ of morphism in $\mathbf{C}$ with target $X$, subject to the following axioms:
  \begin{enumerate}[label=(PT\arabic*)]\addtocounter{enumi}{-1}
    \item For every object $X$ in $\mathbf{C}$, every $\{ X_{i} \to X \}_{i \in I}$ in $\operatorname{Cov}(X)$ and every $i \in I$, the morphism $X_{i} \to X$ is quarrable.\label{pt:0}
    \item For every object $X$ in $\mathbf{C}$, every $\{ X_{i} \to X \}_{i \in I}$ in $\operatorname{Cov}(X)$ and every morphism $f \colon Y \to X$ in $\mathbf{C}$, the set $\{ X_{i} \times_{X} Y \to Y \}_{i \in I}$ is in $\operatorname{Cov}(Y)$.
      (Stability under base change.)\label{pt:1}
    \item Let $X$ be an object in $\mathbf{C}$, let $\{ X_{i} \to X \}_{i \in I}$ be a set in $\operatorname{Cov}(X)$ and for each $i \in I$ let $\{ X_{i,j} \to X_{i}\}_{j \in J_{i}}$ be a set in $\operatorname{Cov}(X_{i})$.
      Then the set of compositions $\{ X_{i,j} \to X \}_{i \in I, j \in J_{i}}$ is in $\operatorname{Cov}(X)$.
      (Stability under composition.)\label{pt:2}
    \item The collection $\{ X \xrightarrow{\operatorname{id}_{X}} X \}$ is in $\operatorname{Cov}(X)$.\label{pt:3}
  \end{enumerate}
\end{defn}

We will call a collection $\{ X_{i} \to X \}_{i \in I}$ in $\operatorname{Cov}(X)$ a \textit{covering} of $X$ in $\mathbf{C}$ (endowed with this pretopology).
We will also use $\operatorname{Cov}(\mathbf{C})$ to denote the collection of all coverings in a given pretopology on $\mathbf{C}$.

\begin{rem}
  This is the definition in \cite{sga4}.
  In \cite{stacks-project}, condition \ref{pt:3} is apparently strengthened a bit to ask that every isomorphism $\{ Y \xrightarrow{\cong} X \}$ is in $\operatorname{Cov}(X)$.
  But this follows from \ref{pt:3}, \ref{pt:1} and the cartesian square
  \begin{center}
    \begin{tikzcd}
      Y \arrow[phantom, "\lrcorner"]{dr} \arrow{r} \arrow{d} & X \arrow[equal]{d} \\
      X \arrow[equal]{r} & X
    \end{tikzcd}
  \end{center}
\end{rem}

\begin{xca}
  Convince yourself that open coverings of an open subset of a topological space have the properties above.
\end{xca}

Once we have endowed our category $\mathbf{C}$ with a pretopology, we can ask ourselves whether a given presheaf $\mathscr{F}$ in $\mathbf{PSh}(\mathbf{C})$ is a \textit{sheaf} with respect to this pretopology.
The definition is the same as it was for topological spaces.
For each object $X$ in $\mathbf{C}$ and each covering $\{ X_{i} \xrightarrow{f_{i}} X \}_{i \in I}$ we define the morphism $\rho \colon \mathscr{F}(X) \to \prod_{i \in I} \mathscr{F}(X_{i})$ by applying the universal property of the product to the morphisms $\mathscr{F}(f_{i}) \colon \mathscr{F}(X) \to \mathscr{F}(X_{i})$.
For each $(i, j) \in I \times I$ we have a cartesian diagram as follows:
\begin{center}
  \begin{tikzcd}
    X_{i} \times_{X} X_{j} \arrow[phantom, "\lrcorner"]{dr} \arrow{r}{p_{2}^{(i,j)}} \arrow[swap]{d}{p_{1}^{(i,j)}} & X_{j} \arrow{d}{f_{j}} \\
    X_{i} \arrow[swap]{r}{f_{i}} & X
  \end{tikzcd}
\end{center}
The first morphism $\sigma_{1} \colon \prod_{i \in I} \mathscr{F}(X_{i}) \to \prod_{(i, j) \in I \times I} \mathscr{F}(X_{i} \times_{X} X_{j})$ is the one induced by the morphisms $\mathscr{F}(p_{1}^{(i,j)})$, and the second morphism $\sigma_{2}$ is the one induced by the morphisms $\mathscr{F}(p_{2}^{(i,j)})$.
The presheaf $\mathscr{F}$ is then a sheaf if and only if for every object $X$ in $\mathbf{C}$ and every cover $\{ X_{i} \to X \}_{i \in I}$ in $\operatorname{Cov}(X)$ the diagram
\begin{center}
  \begin{tikzcd}
    \mathscr{F}(X) \arrow{r}{\rho} & \prod_{i \in I} \mathscr{F}(X_{i}) \arrow[shift left=2]{r}{\sigma_{1}} \arrow[swap, shift right=2]{r}{\sigma_{2}} & \prod_{(i, j) \in I \times I} \mathscr{F}(X_{i} \times_{X} X_{j})
  \end{tikzcd}
\end{center}
is exact.
We will refer to this as the \textit{sheaf condition} with respect to the cover $\{ X_{i} \to X \}_{i \in I}$.

\begin{lm}\label{lm:refinement}
  Let $X$ be a topological space and let $\mathscr{F}$ be a presheaf on $X$.
  Let $U \subseteq X$ be an open subset and let $\{ U_{i} \}_{i \in I}$ be an open cover of $U$.
  Let $\{ V_{j} \}_{j \in J}$ be a refinement of $\{ U_{i} \}_{i \in I}$, i.e., $\{ V_{j} \}_{j \in J}$ is still an open cover of $U$ and for every $j \in J$ there exists some $i \in I$ such that $V_{j} \subseteq U_{i}$.
  \begin{enumerate}[label=(\alph*)]
    \item If $\mathscr{F}(U) \to \prod_{j \in J} \mathscr{F}(V_{j})$ is injective, then so is $\mathscr{F}(U) \to \prod_{i \in I} \mathscr{F}(U_{i})$.
    \item If $\mathscr{F}$ satisfies the sheaf condition with respect to $\{ V_{j} \}_{j \in J}$ and for every $i \in I$ the map $\mathscr{F}(U_{i}) \to \prod_{j \in J} \mathscr{F}(V_{j} \cap U_{i})$ is injective, then $\mathscr{F}$ satisfies the sheaf condition with respect to $\{ U_{i} \}_{i \in I}$.
  \end{enumerate}
  \begin{proof}
    Using the axiom of choice we may fix a function $\beta \colon J \to I$ such that $V_{j} \subseteq U_{\beta(j)}$ for all $j \in J$.

    We first show $(a)$.
    Suppose that $s, t \in \mathscr{F}(U)$ are sections such that $s|_{U_{i}} = t|_{U_{i}}$ for all $i \in I$.
    Then we have
    \[ s|_{V_{j}} = (s|_{U_{\beta(j)}})|_{V_{j}} = (t|_{U_{\beta(j)}})|_{V_{j}} = t|_{V_{j}} \]
    for all $j \in J$, so $s = t$.

    Let us show $(b)$ now.
    The sheaf condition for $\{ V_{j} \}_{j \in J}$ tells us that for every family of sections $(s_{j})_{j \in J} \in \prod_{j \in J} \mathscr{F}(V_{j})$ such that for each $(j_{1},j_{2}) \in J \times J$ we have
    \[ s_{j_{1}}|_{V_{j_{1}} \cap V_{j_{2}}} = s_{j_{2}}|_{V_{j_{1}} \cap V_{j_{2}}} \]
    there exists a unique section $s \in \mathscr{F}(U)$ such that $s_{j} = S|_{V_{j}}$ for all $j \in J$.
    To check the sheaf condition for $\{ U_{i} \}_{i \in I}$, let now $(s_{i})_{i \in I} \in \prod_{i \in I}\mathscr{F}(U_{i})$ be a family of sections such that for every $(i_{1}, i_{2}) \in I \times I$ we have
    \[ s_{i_{1}}|_{U_{i_{1}} \cap U_{i_{2}}} = s_{i_{2}}|_{U_{i_{1}} \cap U_{i_{2}}}. \]
    We define a collection $(t_{j})_{j \in J} \in \prod_{j \in J} \mathscr{F}(V_{j})$ as follows.
    Then we set $t_{j} := s_{\beta(j)}|_{V_{j}}$ for each $j \in J$.
    So we have a collection $(t_{j})_{j \in J} \in \prod_{j \in J} \mathscr{F}(V_{j})$.
    Then we have
    \[ t_{j_{1}}|_{V_{j_{1}} \cap V_{j_{2}}} = (s_{\beta(j_{1})}|_{U_{\beta(j_{1})} \cap U_{\beta(j_{2})}})|_{V_{j_{1}} \cap V_{j_{2}}} = (s_{\beta(j_{2})}|_{U_{\beta(j_{1})} \cap U_{\beta(j_{2})}})|_{V_{j_{1}} \cap V_{j_{2}}} = t_{j_{2}}|_{V_{j_{1}} \cap V_{j_{2}}} \]
    for all $(j_{1}, j_{2}) \in J \times J$.
    Hence there exists a unique $s \in \mathscr{F}(U)$ such that $t_{j} = s|_{V_{j}}$ for all $j \in J$.
    It remains to show now that $s|_{U_{i}} = s_{i}$ for all $i \in I$.
    By assumption, the map $\mathscr{F}(U_{i}) \to \prod_{j \in J} \mathscr{F}(V_{j} \cap U_{i})$ is injective for every $i \in I$, so it suffices to show that $s|_{U_{i}}$ and $s_{i}$ have the same image under this map.
    But now
    \[ s|_{V_{j} \cap U_{i}} = t_{j}|_{V_{j} \cap U_{i}} = (s_{\beta(j)}|_{U_{\beta(j)} \cap U_{i}})|_{V_{j} \cap U_{i}} = (s_{i}|_{U_{\beta(j)} \cap U_{i}})|_{V_{j} \cap U_{i}} = s_{i}|_{V_{j} \cap U_{i}}. \]
  \end{proof}
\end{lm}

\begin{rem}
  Essentially the same proof works in the context of categories and pretopologies, requiring only some slightly more involved notation and some extra assumptions to ensure existence of fiber products, cf.~\cite[\href{https://stacks.math.columbia.edu/tag/0G1L}{Tag 0G1L}]{stacks-project}.
\end{rem}

\begin{cor}\label{cor:refinement}
  Let $\mathbf{C}$ be a category.
  For simplicity, let us assume that all fiber products exist in $\mathbf{C}$.
  Let $\operatorname{Cov}_{1}(\mathbf{C})$ and $\operatorname{Cov}_{2}(\mathbf{C})$ be two pretopologies on $\mathbf{C}$ and assume that every cover $\{ U_{i} \xrightarrow{f_{i}} X \}_{i \in I}$ in $\operatorname{Cov}_{1}(\mathbf{C})$ admits a refinement $\{ V_{j} \xrightarrow{g_{j}} X \}_{j \in J}$ in $\operatorname{Cov}_{2}(\mathbf{C})$, meaning that there exists a function $\beta \colon J \to I$ and for each $j \in J$ a morphism $\alpha_{j} \colon V_{j} \to U_{\beta(j)}$ such that the diagram
  \begin{center}
    \begin{tikzcd}
      V_{j} \arrow[swap]{dr}{g_{j}} \arrow{r}{\alpha_{j}} & U_{\beta(j)} \arrow{d}{f_{\beta(j)}} \\
      & X
    \end{tikzcd}
  \end{center}
  commutes.
  If a presheaf $\mathscr{F}$ is a sheaf with respect to the pretopology given by $\operatorname{Cov}_{2}(\mathbf{C})$, then it is also a sheaf with respect to the pretopology given by $\operatorname{Cov}_{1}(\mathbf{C})$.
  \begin{proof}
    Part $(a)$ of \Cref{lm:refinement} ensures that $\mathscr{F}$ is separated with respect to the pretopology $\operatorname{Cov}_{1}(\mathbf{C})$, which in turn allows us to apply part $(b)$ of \Cref{lm:refinement}.
  \end{proof}
\end{cor}

This already hints at the main motivation point for this talk:~different pretopologies may give rise to the same notion of sheaf on a category.
A bit like when one defines a notion of smooth function on a topological manifold; different smoothly compatible atlases may give rise to the same notion of smooth function.
A way to solve this is to define a smooth structure on a topological manifold as a maximal smoothly compatible atlas.
This solution has a similar flavor to the one that we will adopt in our situation; we will come back to this later on.

\begin{exmp}\label{exmp:indiscretetopology}
  Let $X$ be a set and consider the \textit{indiscrete topology} $\{ \varnothing, X \}$ on $X$.
  If $U \subseteq X$ is an open subset, the only possible open covers of $U$ are $\{ U \}$ and $\{ \varnothing, U \}$.
  If we want $\mathscr{F}$ to be sheaf, we need at the very least that $\mathscr{F}(\varnothing) = \{ * \}$, because we can always take the empty covering of the empty set and an empty product of sets is a terminal object in $\mathbf{Set}$, i.e., a singleton.
  But other than that, there is no restriction on $\mathscr{F}$ to be a sheaf.
  Indeed, assume $\mathscr{F}(\varnothing) = \{ * \}$ and let $U \subseteq X$ be a non-empty open subset.
  Let us first consdier the open cover $\{ U \}$ of $U$.
  Let $\Delta_{U} = \{ (x,y) \in U \times U \mid x = y \}$, which is isomorphic to $U$.
  Then we have a cartesian square
  \begin{center}
    \begin{tikzcd}
      \Delta_{U} \arrow[phantom, "\lrcorner"]{dr} \arrow[swap]{d}{p_{1}} \arrow{r}{p_{2}} & U \arrow[equal]{d} \\
      U \arrow[equal]{r} & U
    \end{tikzcd}
  \end{center}
  The sheaf condition with respect to this cover translates into the diagram
  \begin{center}
    \begin{tikzcd}
      \mathscr{F}(U) \arrow[equal]{r} & \mathscr{F}(U) \arrow[shift left=2]{r}{p_{1}^{*}} \arrow[shift right=2, swap]{r}{p_{2}^{*}} & \mathscr{F}(\Delta_{U})
    \end{tikzcd}
  \end{center}
  being exact, where we use the shorthand notation $p_{i}^{*}$ instead of $\mathscr{F}(p_{i})$ for each $i \in \{ 1, 2 \}$.
  Commtuativity of the cartesian diagram above implies that $p_{1} = p_{2}$, hence $p_{1}^{*} = p_{2}^{*}$ and the diagram is indeed exact.
  Let us now consider the cover $\{ \varnothing, U \}$ of $U$.
  Then we want the following diagram to be exact:
  \begin{center}
    \begin{tikzcd}
      \mathscr{F}(U) \arrow{r}{\rho} & \mathscr{F}(\varnothing) \times \mathscr{F}(U) \arrow[shift left=2]{d}{\sigma_{1}} \arrow[swap, shift right=2]{d}{\sigma_{2}} \\
      & \mathscr{F}(\varnothing \times_{U} \varnothing) \times \mathscr{F}( \varnothing \times_{U} U) \times \mathscr{F}(U \times_{U} \varnothing) \times \mathscr{F}(U \times_{U} U)
    \end{tikzcd}
  \end{center}
  The morphism $\rho \colon \mathscr{F}(U) \to \{ * \} \times \mathscr{F}(U)$ is an isomorphism, so we need to check that $\sigma_{1} = \sigma_{2}$.
  Let $(*,s) \in \mathscr{F}(\varnothing) \times \mathscr{F}(U)$.
  Then we have
  \[ \sigma_{1}(*,s) = (*,*,*,p_{1}^{*}(s)) = (*,*,*,p_{2}^{*}(s)) = \sigma_{2}(*,s), \]
  hence this second diagram is exact as well.

  This whole discussion shows that the presheaf $\mathscr{F}$ is a sheaf if and only if $\mathscr{F}(\varnothing) = \{ * \}$.
  Being a sheaf in the topological sense is the same as being a sheaf in the category $\mathbf{Op}(X)$ with the pretopology $\operatorname{Cov}_{1}$ given by all possible open covers of all open subsets.
  Let now $\operatorname{Cov}_{2}$ be the \textit{indiscrete pretopology} on $\mathbf{Ob}(X)$,
  in which $\{ U \}$ is the only cover of an open subset $U \subseteq X$.
  The difference here is that we are not allowing the empty covering of the empty set.
  We are in the assumptions of \Cref{cor:refinement}, because every cover of an open subset $U \subseteq X$ in the indiscrete pretopology can be refined by an open cover, i.e., by a cover in the pretoplogy $\operatorname{Cov}_{1}$.
  So every presehaf $\mathscr{F}$ which is a sheaf in the topological sense, i.e., with respect to the pretopology $\operatorname{Cov}_{1}$, is also a sheaf with respect to the indiscrete pretopology $\operatorname{Cov}_{2}$.
  Indeed, in this case this is easily seen to be the case, because every presheaf $\mathscr{F}$ with $\mathscr{F}(\varnothing) = \{ * \}$ is in particular a presheaf.
\end{exmp}

\begin{exmp}
  Let $X$ be a topological space and let $\mathcal{B}$ be a basis for the topology, i.e., a collection of open subsets of $X$ such that
  \begin{enumerate}
    \item The elements of $\mathcal{B}$ cover $X$, i.e., for every $x \in X$ there exists some $B \in \mathcal{B}$ such that $x \in B$.
    \item Given two elements $B_{1}, B_{2} \in \mathcal{B}$ and given a point $x \in B_{1} \cap B_{2}$, there exists some $B_{3} \in \mathcal{B}$ such that $x \in B_{3}$ and $B_{3} \subseteq B_{1} \cap B_{2}$.
  \end{enumerate}
  We take $\operatorname{Cov}_{1}$ as the topological pretopology on $\mathbf{Op}(X)$, in which the coverings are just the open covers of open subsets of $X$; and we take $\operatorname{Cov}_{2}$ as the pretopology on $\mathbf{Op}(X)$ in which the open covers are the open covers of open subsets of $X$ whose elements are all in $\mathcal{B}$.
  Then a presheaf $\mathscr{F}$ is a $\operatorname{Cov}_{1}$ sheaf if and only if it is a $\operatorname{Cov}_{2}$ sheaf.
  
  Indeed, we can apply \Cref{cor:refinement} to deduce the claim.
  If $\{ U_{i} \}_{i \in I}$ is a cover of $U\subseteq X$ in $\operatorname{Cov}_{2}$, then it is also a cover of $U\subseteq X$ in $\operatorname{Cov}_{1}$, because we were assuming that the elements of our basis $\mathcal{B}$ are all open.
  This shows that a $\operatorname{Cov}_{1}$ sheaf is also a $\operatorname{Cov}_{2}$ sheaf.
  (Note that in this case it is really on the nose, since $\operatorname{Cov}_{2} \subseteq \operatorname{Cov}_{1}$, so we are just checking a smaller amount of conditions.)
  Conversely, every usual open cover of $U \subseteq X$ admits a refinement by elements of the basis $\mathcal{B}$, so every $\operatorname{Cov}_{2}$ sheaf is a $\operatorname{Cov}_{1}$ sheaf.
\end{exmp}

In fact, it would even suffice to define a presheaf on a basis for the topology to obtain a presheaf on $\mathbf{Op}(X)$, cf.~\cite[Chapter 0, (3.2.1)]{ega}.

\section{Sieves}

We have seen that two pretopologies on a category $\mathbf{C}$ end up giving the same notion of sheaf if we can always refine the covers of one of the pretopologies by covers in the other pretopology and vice-versa.
As pointed out earlier, this resembles a bit the situation that one runs into when trying to define smooth structures on topological manifolds naively.
A solution in that case is to consider only maximal smoothly compatible atlases.
A solution in our categorical setting will also be very similar to this in flavour:

\begin{defn}[Sieve]
  Let $\mathbf{C}$ be a category and let $X$ in $\mathbf{C}$ be an object.
  A \textit{sieve} $S$ on $X$ is a subfunctor $S \subseteq h_{X}$.
\end{defn}

\begin{rem}
  Recall that it is convenient to think of $X$ as being the same as the functor $h_{X}$, so we may think of $S$ as a subobject of $X$ in $\mathbf{PSh}(\mathbf{C})$.
  Conversely, it is also helpful to imagine that $S$ was in fact representable by an object $S$ in $\mathbf{C}$ and think of the map $S \to h_{X}$ as a ``morphism from $S$ to $X$'', cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00YW}{Tag 00YW}]{stacks-project}.
\end{rem}

Let us spell out what it means for a presheaf $S$ in $\mathbf{PSh}(\mathbf{C})$ to be a subfunctor of $h_{X}$.
Since it is a functor, we need to describe how it acts on objects and how it acts on morphisms.
On an object $T$ of $\mathbf{C}$, we want to have a subset
\[ S(T) \subseteq h_{X}(T) = \operatorname{Hom}(T,X). \]
Given any morphism $f \colon T \to T'$ in $\mathbf{C}$, we have an induced morphism $(-) \circ f \colon h_{X}(T') \to h_{X}(T)$.
For $S$ to be a subfunctor of $h_{X}$ we need to have a commutative diagram as follows:
\begin{center}
  \begin{tikzcd}
    S(T') \arrow[hookrightarrow]{r} \arrow[swap]{d}{(-)\circ f} & h_{X}(T') \arrow{d}{(-) \circ f} \\
    S(T) \arrow[hookrightarrow]{r} & h_{X}(T)
  \end{tikzcd}
\end{center}

In other words, a sieve on $X$ consists on a collection of subsets $S(T) \subseteq h_{X}(T)$ such that for all $f \colon T \to T'$ in $\mathbf{C}$ we have that
\begin{equation}\label{eqn:sieve}
  (T' \xrightarrow{g} X) \in S(T') \Rightarrow (T \xrightarrow{g \circ f} X) \in S(T).
\end{equation}

\begin{exmp}\label{exmp:maximalsieve}
  Let $\mathbf{C}$ be a category and let $X$ be an object in $\mathbf{C}$.
  Let $S \subseteq h_{X}$ be a sieve such that $\operatorname{id}_{X} \in S(X)$.
  Then $S = h_{X}$.
  Indeed, let $f \colon Y \to X$ be a morphism in $\mathbf{C}$.
  Then $\operatorname{id}_{X} \in S(X)$ implies $f \in S(Y)$ by \Cref{eqn:sieve}.
\end{exmp}

\begin{rem}
  It is common (at least in algebraic geometry) to denote
  \[ X(T) = h_{X}(T) = \operatorname{Hom}(T,X). \]
  These are called the $T$-valued points of $X$ when $T$ and $X$ are schemes, because if we take for example the scheme $X = \operatorname{Spec}(\mathbb{Z}[x,y]/(x^{2} + y^{2}))$ and we consider a field extension $\mathbb{Q} \subseteq K$, then the $K$-valued points of $X$ give us the $K$-valued solutions of the defining equation of $X$:
  \[ X(K) := X(\operatorname{Spec}(K)) = \{ (a,b) \in K^{2} \mid a^{2} + b^{2} = 0\}. \]
  This notation fits nicely into our usual abuse of notation and terminology in which we do not distinguish between $X$ and $h_{X}$ too much.
\end{rem}

Some observations:

\begin{lm}[{cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00YZ}{Tag 00YZ}]{stacks-project}}]
  Let $\mathbf{C}$ be a category and let $X$ be an object in $\mathbf{C}$.
  \begin{enumerate}
    \item Inclusion defines a partial ordering among sieves on $X$.
    \item The union of a colleciton of sieves on $X$ is a sieve on $X$.
    \item The intersection of a collection of sieves on $X$ is a sieve on $X$.
    \item The sieve $X = h_{X}$ is the maximal sieve.
    \item The empty subfunctor is the minimal sieve.
  \end{enumerate}
\end{lm}

We will need the following two constructions with sieves:

\begin{defnlm}[Generated sieve, {cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00Z1}{Tag 00Z1}]{stacks-project}}]\label{defnlm:generated}
  Let $\mathbf{C}$ be a category and let $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ be a family of morphisms with fixed target.
  Then there exists a unique sieve $S$ on $X$, called the \textit{sieve generated} by the family of morphisms $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$, which is the smallest sieve on $X$ such that for every $i \in I$, the morphism $f_{i} \colon X_{i} \to X$ is in $S(X_{i})$.
  \begin{proof}
    We regard every $f_{i} \colon X_{i} \to X$ as a morphism of functors $h_{f_{i}} \colon h_{X_{i}} \to h_{X}$ and we take $S$ to be the union of their images.
    Explicitly,
    \[ S(T) = \{ f \colon T \to X \mid \exists i \in I \text{ such that } \exists g \colon T \to X_{i} \text{ with } f = f_{i} \circ g \}. \]
    We check that \Cref{eqn:sieve} holds.
    Let $\alpha \colon T \to T'$ be a morphism in $\mathbf{C}$ and let $f \in S(T')$.
    Then there exists some $i \in I$ and some $g \colon T' \to X_{i}$ such that $f = f_{i} \circ g$.
    Since $f \circ \alpha = f_{i} \circ (g \circ \alpha)$, we get $f \circ \alpha \in S(T)$ and $S$ is indeed a sieve.
  \end{proof}
\end{defnlm}

\begin{defnlm}[Pull back sieve, {cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00Z2}{Tag 00Z2}]{stacks-project}}]\label{defnlm:pullback}
  Let $\mathbf{C}$ be a category, let $f \colon Y \to X$  be a morphism in $\mathbf{C}$ and let $S$ be a sieve on $X$.
  We define the \textit{pull back} of $S$ by $f$ to be the sieve $S \times_{X} Y$ on $Y$ defined by the rule
  \[ (\alpha \colon T \to Y) \in (S\times_{X} Y)(T) : \Leftrightarrow (f \circ \alpha \colon T \to X) \in S(T). \]
  \begin{proof}
    We check again that \Cref{eqn:sieve} holds.
    Let $\beta \colon T \to T'$ be a morphism in $\mathbf{C}$ and let $\alpha \in (S\times_{X} Y)(T')$.
    We want to show that $\alpha \circ \beta \in (S \times_{X} Y)(T)$, i.e., we want to show that $f \circ (\alpha \circ \beta) \in S(T)$.
    This follows from $f \circ (\alpha \circ \beta) = (f \circ \alpha) \circ \beta$, $f \circ \alpha \in S(T')$ by definition of $S \times_{X} Y$ and from \Cref{eqn:sieve} and the assumption that $S$ is a sieve.
  \end{proof}
\end{defnlm}

\begin{rem}
  The notation suggests that the pull back sieve is related to the fiber product of presheaves in some way.
  But it cannot be the fiber product on the nose, because we want the pull back of a sieve $S$ on $X$ under a morphism $f \colon Y \to X$ to be a sieve on $Y$, and the fiber product $S \times_{X} Y = S \times_{h_{X}} h_{Y}$ is not necessarily a subfunctor of $h_{Y}$ strictly speaking (the fiber product is only uniquely determined up to isomorphism anyway).
  So instead we look at the image of $S \times_{X} Y$ in $Y$, i.e., at the image presheaf of the presheaf morphism appearing on the top of the following cartesian square:
  \begin{center}
    \begin{tikzcd}
      S \times_{X} Y \arrow[phantom, "\lrcorner"]{dr} \arrow{d} \arrow{r} & Y \arrow{d}{f} \\
      S \arrow[hookrightarrow]{r} & X
    \end{tikzcd}
  \end{center}
  The pull back of a monomorphism is a monomorphism, so the abuse of notation of calling $S \times_{X} Y$ and its image in $Y$ the same way is rather harmless.
\end{rem}

\begin{exmp}\label{exmp:pullbacksieve}
  Let $\mathbf{C}$ be a category and let $X$ be an object in $\mathbf{C}$.
  Let $S$ be a sieve on $X$ and let $f \colon Y \to X$ be a morphism in $S$.
  Then $S \times_{X} Y = h_{Y}$.
  Indeed, from \Cref{defnlm:pullback} we know that $S \times_{X} Y \subseteq h_{Y}$ is a sieve, so let us prove the other inclusion.
  Let $T$ be an object in $\mathbf{C}$ and let $\alpha \colon T \to Y$ be any morphism in $\mathbf{C}$.
  We want to show that $\alpha \in (S \times_{X} Y)(T)$, i.e., we want to show that $f \circ \alpha \in S(T)$.
  This follows from $f \in S(Y)$ and \Cref{eqn:sieve}.
  Another option is to argue using \Cref{exmp:maximalsieve} and noting that $f \in S(Y)$ implies that $\operatorname{id}_{Y} \in (S \times_{X} Y)(Y)$ by definition.
\end{exmp}

\begin{rem}\label{rem:pullback}
  Let $\mathbf{C}$ be a category and let $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ be a family of morphisms.
  Let $S$ be the sieve on $X$ generated by this family of morphisms and let $f \colon Y \to X$ be any morphism in $\mathbf{C}$.
  Then the pull back sieve $S \times_{X} Y$ is the sieve generated by the pulled back family of morphisms $\{ f^{*}(f_{i}) \colon Y \times_{X} X_{i} \to Y \}_{i \in I}$.
  Indeed, let $T$ be an object in $\mathbf{C}$.
  The claim is then that $t \in (S \times_{X} Y)(T)$ if and only if there exists $i \in I$ such that there exists $g \colon T \to X_{i} \times_{X} Y$ with $t = f^{*}(f_{i}) \circ g$.
  By definition, $t \in (S \times_{X} Y)(T)$ if and only if $f \circ t \in S(T)$.
  Since $S$ is the sieve generated by the family $\{f_{i} \colon X_{i} \to X \}_{i \in I}$, we have in turn that $f \circ t \in S(T)$ if and only if there exists $i \in I$ such that there exists $h \colon T \to X_{i}$ such that $f \circ t = f_{i} \circ h$.
  Suppose first that this is the case.
  Then we can take $g \colon T \to X_{i} \times_{X} Y$ to be the morphism given by the universal property of the fiber product as follows:
  \begin{center}
    \begin{tikzcd}
      T \arrow[bend left=30]{drr}{t} \arrow[bend right=30]{ddr}{h} \arrow[dashed]{dr}{\exists ! g} & & \\
      & X_{i} \times_{X} Y \arrow[swap]{d}{p} \arrow[swap]{r}{f^{*}(f_{i})} & Y \arrow{d}{f} \\
      & X_{i} \arrow[swap]{r}{f_{i}} & X
    \end{tikzcd}
  \end{center}
  Conversely, suppose there exists a morphism $g \colon T \to X_{i} \times_{X} Y$ such that $t = f^{*}(f_{i}) \circ g$.
  Then we can take $h = p \circ g$ as in the diagram above.
\end{rem}

\section{Grothendieck topologies}

\begin{defn}[Grothendieck topology]
  Let $\mathbf{C}$ be a category.
  A \textit{topology} on $\mathbf{C}$, also called a \textit{Grothendieck topology} on $\mathbf{C}$, consists of the data of a set $J(X)$ of sieves on $X$ for each object $X$ in $\mathbf{C}$, subject to the following axioms:
  \begin{enumerate}[label=(T\arabic*)]
    \item Stability under pull back:~for every morphism $f \colon Y \to X$ in $\mathbf{C}$ and every $S \in J(X)$ we have $S \times_{X} Y \in J(Y)$.\label{t:1}
    \item Locality condition:~if $S$ and $S'$ are sieves on $X$ with $S \in J(X)$ and if for all objects $Y$ of $\mathbf{C}$ and all $f \in S(Y)$ we have $S' \times_{X} Y \in J(Y)$, then $S' \in J(X)$.\label{t:2}
    \item For every object $X$ in $\mathbf{C}$ we have $X \in J(X)$.\label{t:3}
  \end{enumerate}
  The sieves in $J(X)$ are called \textit{covering sieves} of $X$, and a category $\mathbf{C}$ endowed with a topology is called a \textit{site}\footnote{Mind the terminology clash with \cite{stacks-project}.}.
  We will sometimes use $J$ to denote a topology, so we may say stuff like ``let $(\mathbf{C},J)$ be a site...''
\end{defn}

Recall that we are trying to abstract the notion of an open cover to a categorical setting in order to work with sheaves on categories.
Our first attempt was endowing the category $\mathbf{C}$ with a pretopology.
This is in fact good enough in practice (and even better than what we are about to do), cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00YW}{Tag 00YW}]{stacks-project}.
But we have seen that different pretopologies may give rise to the same notion of sheaf; so this is not so satisfactory from a conceptual point of view.
Therefore we have tried to rephrase our definition in terms of sieves, again, in a way somewhat parallel to how one considers a maximal smooth atlas when trying to define a notion of smooth function on a topological manifold.
Let us now make the comparison more explicit:

\begin{enumerate}\addtocounter{enumi}{-1}
  \item We do not need \ref{pt:0} any longer, because the pull back of a sieve always exists.
  \item We continue to require stability under pull back in \ref{t:1} as we did in \ref{pt:1}.
    This corresponds to the fact that if we have an open cover $\{ U_{i} \}_{i \in I}$ of an open subset $U$ and another open subset $V \subseteq U$, then we obtain an open cover $\{ V \cap U_{i} \}_{i \in I}$ of $V$.
  \item Condition \ref{t:2} corresponds to the fact that we can check whether a collection $\{ U_{i} \}_{i \in I}$ of subsets of $U$ is an open cover by checking that it restricts to an open cover on each element of an open cover of $U$.
    (``Open covers are local on the target''.)
    In the case of a pretopology, we were considering arbitrary families of morphisms with target the object that we are trying to cover, but now we are considering sieves instead.
    This makes the old \ref{pt:2} obsolete, because stability under composition is baked into the definition of a sieve already.
  \item We continue to require that identities be coverings in \ref{t:3} as we did in \ref{pt:3}.
    This corresponds to the fact that $\{ U \}$ is an open cover of the open subset $U$ itself.
\end{enumerate}

Before seeing a couple of examples, we make the following observation:

\begin{lm}[{\cite[\href{https://stacks.math.columbia.edu/tag/00Z5}{Tag 00Z5}]{stacks-project}}]\label{lm:cofiltered}
  Let $(\mathbf{C},J)$ be a site and let $X$ be an object in $\mathbf{C}$.
  \begin{enumerate}
    \item Finite intersections of elements of $J(X)$ are again in $J(X)$.
    \item If $S \in J(X)$ and $S' \supseteq S$, then $S' \in J(X)$ as well.
  \end{enumerate}
  In particular, the set $J(X)$ ordered with inclusions is cofiltered \cite[\href{https://stacks.math.columbia.edu/tag/04AZ}{Tag 04AZ}]{stacks-project}.
  \begin{proof}
    We begin by showing $(1)$.
    Let's stretch the language more than we perhaps should and take two open covers $S$ and $S'$ of $X$, i.e., let $S, S' \in J(X)$.
    We check that the collection $S \cap S'$ is again an open cover of $X$, and we do this by arguing locally on the open cover $S$.
    That is, we want to apply \ref{t:2} to the sieve $S \cap S'$ and the covering sieve $S$.
    So let $Y$ be an object in $\mathbf{C}$ and let $f \in S(Y)$.
    Then we have $(S \cap S') \times_{X} Y = S' \times_{X} Y$, because
    \[ (S \cap S') \times_{X} Y = S \times_{X} S' \times_{X} Y = S \times_{X} Y \times_{X} S' = Y \times_{X} S' = S' \times_{X} Y, \]
    where in the second to last equality we have used \Cref{exmp:pullbacksieve}.
    One can also check the equality $(S \cap S') \times_{X} Y = S' \times_{X} Y$ by hand, unravelling the definitions and using \Cref{eqn:sieve}.
    But \ref{t:1} tells us that $S \times_{X} Y$ is in $J(Y)$, so by \ref{t:2} the sieve $S \cap S'$ is again in $J(X)$.

    Let us show $(2)$ now.
    Let $S \in J(X)$ and let $S' \supseteq S$.
    We check again locally that this is an open cover of $X$.
    Let $Y$ be an object in $\mathbf{C}$ and let $f \in S(Y)$.
    Again using \Cref{exmp:pullbacksieve} we have $S' \times_{X} Y = Y$, because $f \in S(Y) \subseteq S'(Y)$.
    Hence $S' \times_{X} Y = Y \in J(Y)$ by \ref{t:3}, so $S' \in J(X)$ by \ref{t:2}.

    Finally, for the assertion that $J(X)$ is cofiltered, note that \ref{t:3} implies that it is non-empty and connected, because every $S \in J(X)$ admits a morphism to $X \in J(X)$.
    Since there is at most one morphism between two covering sieves in the partially ordered set $J(X)$, assertion $(1)$ in this lemma already ensures that $J(X)$ is cofiltered.
  \end{proof}
\end{lm}

\begin{rem}\label{rem:t2}
  The proof of \Cref{lm:cofiltered} shows that in order to check that a set of sieves on a category $\mathbf{C}$ satisfies the axiom \ref{t:2} it suffices to check that it satisfies the following two conditions:
  \begin{enumerate}[label=(T2)$_{\arabic*}$]
    \item Axiom \ref{t:2} holds whenever $S' \subseteq S$ is a subfunctor.\label{t:2-1}
    \item If $S$ and $S'$ are sieves on $X$, $S \in J(X)$ and $S \subseteq S'$, then $S' \in J(X)$.\label{t:2-2}
  \end{enumerate}
  Indeed, suppose that \ref{t:2-1} and \ref{t:2-2} are satisfied and let $S$ and $S'$ be sieves on $X$ as in \ref{t:2}.
  We have seen in the proof of \Cref{lm:cofiltered} that $(S' \cap S) \times_{X} Y = S' \times_{X} Y$ as a consequence of $f \in S(Y)$.
  So the sieve $S' \cap S \subseteq S$ satisfies the assumptions in \ref{t:2-1} and is therefore in $J(X)$.
  It follows now from \ref{t:2-2} that $S' \in J(X)$ as well.
\end{rem}

Knowing that $J(X)$ is cofiltered makes computing limits indexed over $J(X)$ and computing colimits indexed over $J(X)^{\mathrm{op}}$ easier, cf.~\cite[\href{https://stacks.math.columbia.edu/tag/04AX}{Tag 04AX}]{stacks-project}.

\begin{defn}[Finer and coarser topologies]
  Let $\mathbf{C}$ be a category and let $J$ and $J'$ be two topologies on $\mathbf{C}$.
  We say that $J$ is \textit{finer} than $J'$, or that $J'$ is \textit{coarser} than $J$, if and only if for every object $X$ in $\mathbf{C}$ we have $J'(X) \subseteq J(X)$.
\end{defn}

Intuitively a finer topology has more (``smaller'') open subsets than a coarser topology.
For example, the Euclidean topology on $\mathbb{R}$ is finer than the cofinite topology.
More generally, the Zariski topology is coarser than the analytic topology.

\begin{defnlm}[Intersection topology]\label{defnlm:intersection}
  Let $\mathbf{C}$ be a category and let $\{ J_{i} \}_{i \in I}$ be a collection of topologies on $\mathbf{C}$.
  Then we define their \textit{intersection} $J = \cap_{i \in I} J_{i}$ point-wise, i.e.,
  \[ J(X) = \bigcap_{i \in I} J_{i}(X) \]
  for all objects $X$ of $\mathbf{C}$.
  A straightforward check shows that \ref{t:1}, \ref{t:2} and \ref{t:3} are satisfied for $J$.
\end{defnlm}

Let $\mathbf{C}$ be a category and let us define an order on topologies of $\mathbf{C}$ by declaring that $J \leq J'$ if and only if $J'$ is finer than $J$, i.e., if $J(X) \subseteq J'(X)$ for all objects $X$ in $\mathbf{C}$.
We will also denote this by $J \subseteq J'$.
The intersection of a family of topologies is the infimum of that collection of topologies, and the intersection of all topologies finer than all the topologies in the family is the supremum of that collection of topologies.

\begin{defn}[Covering family]\label{defn:covering}
  Let $(\mathbf{C},J)$ be a site and let $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ be a family of morphisms with fixed target.
  We will say that $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ is a \textit{covering family} if the sieve generated by this family of morphisms is a covering sieve.
\end{defn}

As the name suggests, covering families in the context of topologies are closely related to coverings in the context of pretopologies.
See \Cref{exmp:associated} for the precise relation between the two notions.

\begin{defn}[Topology generated by families of morphisms]\label{defn:generated}
  Let $\mathbf{C}$ be a category.
  Given a collection of families of morphisms with fixed target in $\mathbf{C}$, we can now define the \textit{topology generated by this collection of families of morphisms} as the coarsest topology $J$ on $\mathbf{C}$ making all of them covering families.
\end{defn}

In particular, we may define the topology generated by a collection $\{ S_{i} \}_{i \in I}$ of sieves in $\mathbf{C}$ as the topology generated by the collection of families of morphisms $\{ \cup_{T} S_{i}(T) \}_{i \in I}$, where $T$ ranges over the objects in $\mathbf{C}$.
For each $i \in I$, the sieve generated by the family of morphisms $\cup_{T} S_{i}(T)$ is the sieve $S_{i}$ itself, so the topology generated by a collection of sieves is the coarsest topology on $\mathbf{C}$ making all of them covering sieves.

Let us close this section with some examples.

\begin{exmp}\label{exmp:indiscrete}
  Let $\mathbf{C}$ be a category.
  The \textit{indiscrete topology} on $\mathbf{C}$ is the topology $J$ such that for every object $X$ of $\mathbf{C}$ has $J(X) = \{ X \}$.
  We check the three necessary conditions:
  \begin{enumerate}[label=(T\arabic*)]
    \item Let $f \colon Y \to X$ be a morphism in $\mathbf{C}$ and let $S = X \in J(X)$.
      Then $S \times_{X} Y = X \times_{X} Y = Y \in J(Y)$.
    \item Let $S$ be a sieve on an object $X$ and let $X \in J(X)$.
      Suppose that for all objects $Y$ in $\mathbf{C}$ and all morphisms $f \colon Y \to X$ in $X(Y)$ we have $S \times_{X} Y \in J(Y)$.
      In particular, for $f = \operatorname{id}_{X}$ we have $S \times_{X} X = S \in J(X)$.
    \item We have $X \in J(X)$ by definition.
  \end{enumerate}

  The name of this topology comes from the indiscrete topology on a set $X$, in which the open subsets are only $\varnothing$ and $X$.
\end{exmp}

A finer example:

\begin{exmp}\label{exmp:discretetopology}
  Let $\mathbf{C}$ be a category.
  The \textit{discrete topology} on $\mathbf{C}$ is the topology $J$ in which every sieve is a covering sieve.
  We check again the three necessary conditions:
  \begin{enumerate}[label=(T\arabic*)]
    \item The pull back of a sieve is again a sieve by \Cref{defnlm:pullback}.
    \item This condition is automatically true, because all sieves are covering sieves.
    \item For every object $X$ of $\mathbf{C}$, $X$ is itself a sieve, so $X \in J(X)$.
  \end{enumerate}

  The name of this topology comes from the discrete topology on a set $X$, in which every subset of $X$ is open.
  In this context, in turn, the name discrete comes from the fact that every point of $X$ is isolated in $X$, so it fits our mental picture of a discrete space.
\end{exmp}

\begin{exmp}[{cf.~\cite[\href{https://stacks.math.columbia.edu/tag/00ZD}{Tag 00ZD}]{stacks-project}}]\label{exmp:associated}
  Let $\mathbf{C}$ be a category endowed with a pretopology $\operatorname{Cov}(\mathbf{C})$.
  We define the topology $J$ \textit{associated} to the pretopology $\operatorname{Cov}(\mathbf{C})$ as the topology generated by the collection of all covering families in $\operatorname{Cov}(\mathbf{C})$.
  For every object $X$ in $\mathbf{C}$, let us denote by $J_{0}(X)$ the collection of sieves $S$ on $X$ such that there exists a covering $\{ X_{i} \to X\}_{i \in I}$ in $\operatorname{Cov}(\mathbf{C})$ such that $S$ is the sieve generated by the collection of morphisms $\{ X_{i} \to X \}_{i \in I}$.
  Then a sieve $S$ on $X$ is in $J(X)$ if and only if it contains a sieve in $J_{0}(X)$.
  \begin{proof}
    For every object $X$ in $\mathbf{C}$, let us denote by $J'(X)$ the collection of all sieves on $X$ which contain a sieve in $J_{0}(X)$.
    By \Cref{lm:cofiltered}, we have $J'(X) \subseteq J(X)$ in any case.
    Hence it suffices to show that $J'$ satisfies the axioms for a topology.

    Let us start with \ref{t:1}.
    Let $S \in J'(X)$ and let $f \colon Y \to X$ be any morphism in $\mathbf{C}$.
    We need to show that $S \times_{X} Y \in J'(Y)$, i.e., we need to show that there exists a covering of $Y$ such that the sieve $S \times_{X} Y$ contains the sieve generated by this covering.
    Since $S \in J'(X)$, there exists a covering $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ such that $S$ contains the sieve $S_{0}$ generated by this covering.
    Let us check that $S \times_{X} Y$ contains the sieve generated by the family of morphisms $\{ f^{*}(f_{i}) \colon Y \times_{X} X_{i} \to Y \}_{i \in I}$.
    By \Cref{rem:pullback}, the sieve generated by this pulled back family of morphisms is the pull back sieve $S_{0} \times_{X} Y$.
    So we need to show that $S \times_{X} Y$ contains $S_{0} \times_{X} Y$.
    Indeed, for any $g \in (S_{0} \times_{X} Y)(T)$ we have $f \circ g \in S_{0}(T) \subseteq S(T)$, hence $g \in (S \times_{X} Y)(T)$ as well.

    We check \ref{t:2} next.
    Let $S$ and $S'$ be sieves on $X$ such that $S \in J'(X)$, i.e., there exists a sieve $S_{0} \in J_{0}(X)$ generated by a covering $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ such that $S_{0} \subseteq S$.
    Assume that for every object $Y$ of $\mathbf{C}$ and every $f \in S(Y)$ we have $S' \times_{X} Y \in J'(Y)$.
    In particular, for every $i \in I$ we have $f_{i} \in S_{0}(X_{i}) \subseteq S(X_{i})$, so $S' \times_{X} X_{i} \in J'(X_{i})$.
    This means that for each $i \in I$ there exists a covering $\{ f_{ij} \colon X_{ij} \to X_{i} \}_{j \in J_{i}}$ such that $S' \times_{X} X_{i}$ contains the sieve $S'_{i}$ generated by this covering.
    The family of morphisms
    \[ \{ (f_{i} \circ f_{ij}) \colon X_{ij} \to X \}_{i \in I,j \in J_{i}} \]
    is a covering by \ref{pt:2}.
    Let $S'_{0}$ be the sieve generated by this family, which is then a sieve in $J_{0}(X)$.
    It suffices to show then that $S'_{0} \subseteq S'$, since this implies then that $S' \in J'(X)$ by definition.
    So let $T$ be an object in $\mathbf{C}$ and let $g \in S'_{0}(T)$, i.e., there exist $i \in I$, $j \in J_{i}$ and $g_{ij} \colon T \to X_{ij}$ such that $g = f_{i} \circ f_{ij} \circ g_{ij}$.
    We would like to conclude that $g \in S'(T)$, which by definition of the pull back sieve is equivalent to $f_{ij} \circ g_{ij} \in (S' \times_{X} X_{i})(T)$.
    Since $S'_{i} \subseteq S'\times_{X} X_{i}$, it suffices in turn to show that $f_{ij} \circ g_{ij} \in S'_{i}(T)$.
    But $S'_{i}$ is the sieve generated by the covering $\{ f_{ij} \colon X_{ij} \to X_{i} \}_{j \in J_{i}}$, so this is indeed the case.

    Let us finally check \ref{t:3}, i.e., that $X \in J'(X)$ as well.
    We need to find a covering of $X$ such that $X$ contains the sieve generated by this covering.
    We consider $\{ \operatorname{id}_{X} \}$, which is a covering of $X$ by \ref{pt:3}.
    By \Cref{exmp:maximalsieve}, the sieve generated by this covering is $X$ itself.
    Since $X \subseteq X$, we conclude that $X \in J'(X)$.
  \end{proof}
\end{exmp}

\section{Topologies and sheaves}

Let us start this section with the following definition, despite it being perhaps slightly unmotivated at this point:

\begin{defn}[Sheaf on a site]
  Let $(\mathbf{C},J)$ be a site and let $\mathscr{F}$ be a presheaf on $\mathbf{C}$.
  We say that $\mathscr{F}$ is \textit{separated} (resp.~a \textit{sheaf}) if for every object $X$ in $\mathbf{C}$ and every covering sieve $R \in J(X)$ the induced map
  \[ \operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F}) \]
  is injective (resp.~bijective).
  We denote by $\mathbf{Sh}(\mathbf{C})$ or $\mathbf{Sh}(\mathbf{C},J)$ the full subcategory of sheaves in $\mathbf{PSh}(\mathbf{C})$.
\end{defn}

\begin{exmp}\label{exmp:indiscretesheaf}
  In the indiscrete topology from \Cref{exmp:indiscrete}, a sheaf is the same thing as a presheaf, cf.~\Cref{exmp:indiscretetopology}.
\end{exmp}

\begin{exmp}\label{exmp:discretesheaf}
  Let $(\mathbf{C},J)$ be a discrete site as in \Cref{exmp:discretetopology}.
  For every object $X$ in $\mathbf{C}$, the empty sieve $\varnothing$ is in $J(X)$.
  Note that the empty sieve is an initial object in the category $\mathbf{PSh}(\mathbf{C})$ of presheaves on $\mathbf{C}$.
  So if $\mathscr{F}$ is a sheaf in the discrete topology, then by Yoneda we have
  \[ \mathscr{F}(X) \cong \operatorname{Hom}(X,\mathscr{F}) \cong \operatorname{Hom}(\varnothing, \mathscr{F}) = \{ * \}. \]
  So only the constant presheaf with value a terminal object is a sheaf in the discrete topology.
\end{exmp}

\begin{defnlm}[Topology generated by a family of presheaves]\label{defnlm:generatedtopology}
  Let $\mathbf{C}$ be a category and let $\mathbf{F} = \{ \mathscr{F}_{i} \}_{i \in I}$ be a collection of presheaves on $\mathbf{C}$.
  For each object $X$ of $\mathbf{C}$, we denote by $J_{\mathbf{F}}(X)$ the collection of sieves $R$ on $X$ such that for every morphism $f \colon Y \to X$ in $\mathbf{C}$ the pull back sieve $R \times_{X} Y$ has the property that the induced map
  \[ \operatorname{Hom}(Y,\mathscr{F}_{i}) \to \operatorname{Hom}(R \times_{X} Y, \mathscr{F}_{i}) \]
  is bijective (resp.~injective) for all $i \in I$.
  Then $J_{\mathbf{F}}$ defines a topology on $\mathbf{C}$, called the \textit{topology generated by the family of presheaves} $\mathbf{F}$, which is the finest topology in which all presheaves $\mathscr{F}_{i}$ are sheaves (resp.~separated).
  If we do not specify, we mean the finest topology in which all presheaves $\mathscr{F}_{i}$ are sheaves.
  \begin{proof}
    Let us check first that axiom \ref{t:1} holds.
    Let $R \in J_{\mathbf{F}}(X)$ and let $f \colon Y \to X$ be a morphism in $\mathbf{C}$.
    Then we want to show that $R \times_{X} Y \in J_{\mathbf{F}}(Y)$, so let $g \colon Z \to Y$ be another morphism in $\mathbf{C}$.
    Then we have $R \times_{X} Z = (R \times_{X} Y) \times_{Y} Z$ as subfunctors of $Z$, where the left hand side is the pull back sieve along $f \circ g$.
    Hence the claim follows.
    Axiom \ref{t:3} follows immediately from the equality $X \times_{X} Y = Y$.
    So it remains only to show axiom \ref{t:2}.
    For this we follow the proof in \cite[Expos√© II, Proposition 2.2]{sga4}.

    We have seen in \Cref{rem:t2} that it suffices to show the following two conditions:
    \begin{enumerate}[label=(T2)$_{\arabic*}$]
      \item If $R' \subseteq R$ are sieves on $X$ with $R \in J_{\mathbf{F}}(X)$ and if for all objects $Y$ of $\mathbf{C}$ and all $f \in R(Y)$ we have $R' \times_{X} Y \in J_{\mathbf{F}}(Y)$, then $R' \in J_{\mathbf{F}}(X)$.
      \item If $R' \subseteq R$ are sieves on $X$ with $R' \in J_{\mathbf{F}}(X)$, then $R \in J_{\mathbf{F}}(X)$.
    \end{enumerate}

    Let us check first \ref{t:2-1}.
    Write $R = \operatorname{colim}_{(Z \to R)} Z$ as a colimit of representable presheaves $Z$ as in \cite[Expos√© I, Proposition 3.4]{sga4}.
    Since $R' \subseteq R$, we have $R' = R' \times_{X} R$ in $\mathbf{PSh}(\mathbf{C})$.
    By \cite[Expos√© I, Corollaire 3.3]{sga4} we can then write
    \[ R' = R' \times_{X} (\operatorname{colim}_{(Z \to R)}Z) \cong \operatorname{colim}_{(Z \to R)} (R' \times_{X} Z) \]
    in $\mathbf{PSh}(\mathbf{C})$.
    Each $Z \to R$ corresponds to a morphism $g \in R(Z)$, so by assumption we have $R' \times_{X} Z \in J_{\mathbf{F}}(Z)$.
    Therefore:
    \begin{align*}
      \operatorname{Hom}(R,\mathscr{F}_{i}) & \cong \operatorname{lim}_{(Z \to R)} \operatorname{Hom}(Z,\mathscr{F}_{i}) \\
      & \cong \operatorname{lim}_{(Z \to R)} \operatorname{Hom}(R' \times_{X} Z, \mathscr{F}_{i}) \\
      & \cong \operatorname{Hom}(\operatorname{colim}_{(Z \to R)} R' \times_{X} Z, \mathscr{F}_{i}) \\
      & \cong \operatorname{Hom}(R',\mathscr{F}_{i}).
    \end{align*}
    Now, since $R \in J_{\mathbf{F}}(X)$, we have
    \[ \operatorname{Hom}(X,\mathscr{F}_{i}) \cong \operatorname{Hom}(R,\mathscr{F}_{i}). \]
    Hence
    \[ \operatorname{Hom}(X,\mathscr{F}_{i}) \cong \operatorname{Hom}(R', \mathscr{F}_{i}). \]
    We check next that the assumptions in \ref{t:2-1} are stable under pull back along an arbitrary morphism $Y \to X$ in $\mathbf{C}$.
    We still have $R' \times_{X} Y \subseteq R \times_{X} Y$, and since we have already seen that \ref{t:1} is satisfied, we also have $R \times_{X} Y \in J_{\mathbf{F}}(Y)$.
    Let $Z$ be another object in $\mathbf{C}$ and let $g \in (R \times_{X} Y)(Z)$.
    Then $(R' \times_{X} Y) \times_{Y} Z = R' \times_{X} Z \in J_{\mathbf{F}}(Z)$.
    So the assumptions in \ref{t:2-1} are indeed stable under pull back.
    It follows that
    \[ \operatorname{Hom}(Y,\mathscr{F}_{i}) \cong \operatorname{Hom}(R' \times_{X} Y,\mathscr{F}_{i}) \]
    for all $Y \to X$, i.e., $R' \in J_{\mathbf{F}}(X)$.

    Let us show \ref{t:2-2} now.
    Write again
    \[ R = \operatorname{colim}_{(Z \to R)} Z \text{ and } R' \cong \operatorname{colim}_{(Z \to R)} (R' \times_{X} Z). \]
    Since $R' \in J_{\mathbf{F}}(X)$ and \ref{t:1} is already known to hold for $J_{\mathbf{F}}$, we have $R' \times_{X} Z \in J_{\mathbf{F}}(Z)$ for each $Z \to R$.
    From the same isomorphisms as above and the assumption that $R' \in J_{\mathbf{F}}(X)$ it follows that
    \[ \operatorname{Hom}(X,\mathscr{F}_{i}) \cong \operatorname{Hom}(R,\mathscr{F}_{i}). \]
    The assumptions in \ref{t:2-2} are also stable under pull back along arbitrary morphisms $Y \to X$ in $\mathbf{C}$, because inclusions are preserved by pull back and we already know that \ref{t:1} holds for $J_{\mathbf{F}}$.
    Thus we conclude that $R \in J_{\mathbf{F}}(X)$ as we did for $R'$ before.
  \end{proof}
\end{defnlm}

\begin{rem}
  Note the contrast with the topology generated by a collection of families of morphims:~the topology generated by a collection of presheaves is the \textit{finest} topology for which all presheaves in the collection are sheaves, whereas the topology generated by a collection of families of morphisms is the \textit{coarsest} topology containig all sieves generated by the families of morphisms, cf.~\Cref{defn:generated}.
\end{rem}

We want to compare the notion of sheaf given by a pretopology on $\mathbf{C}$ with the notion of sheaf given by the associated topology on $\mathbf{C}$.
The associated topology is the topology generated by the collection of sieves generated by coverings in the pretopology.
This motivates the following:

\begin{lm}\label{lm:generated}
  Let $\mathbf{C}$ be a category and for each object $X$ of $\mathbf{C}$ let $K(X)$ be a set of sieves on $X$.
  Suppose that this collection of sieves $K$ is stable under pull back, i.e., suppose that \ref{t:1} holds for this collection of sieves.
  Let $\mathscr{F}$ be a presheaf on $\mathbf{C}$.
  Then $\mathscr{F}$ is a sheaf (resp.~separated) for the topology generated by $K$ if and only if for every object $X$ in $\mathbf{C}$ and every sieve $R \in K(X)$ the induced map
  \[ \operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F}) \]
  is bijective (resp.~injective).
  \begin{proof}
    Let $J_{K}$ be the topology generated by this collection of sieves and let $J_{\mathscr{F}}$ be the topology generated by $\mathscr{F}$.
    So we deal with the assertion involving sheaves and bijections; the other assertion is proven similarly.

    Suppose that $\mathscr{F}$ is a sheaf for the topology $J_{K}$.
    By definition of $J_{K}$, for all objects $X$ of $\mathbf{C}$ we have $K(X) \subseteq J_{K}(X)$.
    So the claim follows.

    Conversely, suppose that for all objects $X$ of $\mathbf{C}$ and all $R \in K(X)$ the induced map
    \[ \operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F}) \]
    is bijective.
    Let us check that $J_{K} \subseteq J_{\mathscr{F}}$.
    Let $R \in K(X)$ and let $f \colon Y \to X$ be a morphism in $\mathbf{C}$.
    By \Cref{defnlm:generatedtopology} we need to check that the pull back sieve $R \times_{X} Y$ induces a bijection
    \[ \operatorname{Hom}(Y,\mathscr{F}) \to \operatorname{Hom}(R \times_{X} Y, \mathscr{F}). \]
    But by assumption the collection of sieves $K$ satisfies \ref{t:1}, so $R \times_{X} Y \in K(Y)$ and therefore the previous map is indeed a bijection.
    This shows that $J_{K} \subseteq J_{\mathscr{F}}$.
    Since $\mathscr{F}$ is a sheaf for the topology $J_{\mathscr{F}}$, it is also a sheaf for the coarser topology $J_{K}$.
  \end{proof}
\end{lm}

\begin{cor}\label{cor:sheaves}
  Let $\mathbf{C}$ be a category endowed with a pretopology $\operatorname{Cov}(\mathbf{C})$ and let $J$ be the associated topology.
  Then a presheaf $\mathscr{F}$ on $\mathbf{C}$ is a sheaf with respect to the pretopology $\operatorname{Cov}(\mathbf{C})$ if and only if it is a sheaf with respect to the topology $J$.
  \begin{proof}
    We apply \Cref{lm:generated} to the collection of $K$ of sieves generated by morphisms appearing in a covering of $\operatorname{Cov}(\mathbf{C})$.
    Axiom \ref{pt:1} implies that this collection satisfies \ref{t:1}.
    From this we deduce that $\mathscr{F}$ is a sheaf for the topology generated by $K$, i.e., for $J$, if and only if for every object $X$ in $\mathbf{C}$ and every sieve $R$ generated by a covering $\{ f_{i} \colon X_{i} \to X\}_{i \in I}$ in $\operatorname{Cov}(\mathbf{C})$ the induced map
    \[ \operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F}) \]
    is bijective.
    We check that this condition is in turn equivalent to the sheaf condition for $\mathscr{F}$ with respect to the covering $\{ f_{i} \colon X_{i} \to X \}_{i \in I}$ following \cite[\href{https://stacks.math.columbia.edu/tag/00ZC}{Tag 00ZC}]{stacks-project}.

    Suppose first that this map is bijective and consider the sheaf diagram
    \begin{center}
      \begin{tikzcd}
        \mathscr{F}(X) \arrow{r}{\rho} & \prod_{i \in I} \mathscr{F}(X_{i}) \arrow[shift left=2]{r}{\sigma_{1}} \arrow[swap,shift right=2]{r}{\sigma_{2}} & \prod_{(i,j) \in I \times I} \mathscr{F}(X_{i} \times_{X} X_{j}).
      \end{tikzcd}
    \end{center}
    Let $(s_{i})_{i \in I}$ be a compatible family of sections in $\prod_{i \in I} \mathscr{F}(X_{i})$, i.e., with our usual abuse of notation, a family of sections such that
    \[ s_{i}|_{X_{i} \times_{X} X_{j}} = s_{j}|_{X_{i} \times_{X} X_{j}} \]
    for all $(i,j) \in I \times I$.
    We want to find a unique section $s \in \mathscr{F}(X)$ restricting to $s_{i}$ on each $X_{i}$.
    By Yoneda, it suffices to find a unique morphism $X \to \mathscr{F}$, and by the sheaf condition for the $J$ topology it suffices in turn to find a unique morphism $\varphi \colon R \to \mathscr{F}$.
    Let us construct such a morphism.
    Let $T$ be an object of $\mathbf{C}$ and let $(\alpha \colon T \to X) \in R(T)$.
    By \Cref{defnlm:generated}, this means that there exists $i \in I$ and there exists $f^{i} \colon T \to X_{i}$ such that $\alpha = f_{i} \circ f^{i}$.
    We set $\varphi_{T}(\alpha) := \mathscr{F}(f^{i})(s_{i})$.
    The image $\varphi_{T}(\alpha)$ being well-defined follows from the condition that $s_{i}|_{X_{i} \times_{X} X_{j}} = s_{j}|_{X_{i} \times_{X} X_{j}}$ for all $(i, j) \in I \times I$.
    Indeed, suppose $j \in I$ is another index such that there exists $f^{j} \colon T \to X_{j}$ such that $\alpha = f_{j} \circ f^{j}$.
    The universal property of the fiber product yields then a morphism $t \colon T \to X_{i} \times_{X} X_{j}$ fitting into a commutative diagram as follows:
    \begin{center}
      \begin{tikzcd}
        T \arrow{dr}{t} \arrow[bend left=45]{drr}{f^{j}} \arrow[bend right=45, swap]{ddr}{f^{i}} & & \\
        & X_{i} \times_{X} X_{j} \arrow[swap]{d}{p^{(i,j)}_{1}} \arrow{r}{p^{(i,j)}_{2}} & X_{j} \arrow{d}{f_{j}} \\
        & X_{i} \arrow{r}{f_{i}} & X
      \end{tikzcd}
    \end{center}
    The condition that $s_{i}|_{X_{i} \times_{X} X_{j}} = s_{j}|_{X_{i} \times_{X} X_{j}}$ means then precisely that
    \[ \mathscr{F}(p_{1}^{(i,j)})(s_{i}) = \mathscr{F}(p_{2}^{(i,j)})(s_{j}). \]
    Combining this with commutativity of the diagram and functoriality of $\mathscr{F}$ we deduce that
    \begin{align*}
      \mathscr{F}(f^{i})(s_{i}) & = \mathscr{F}(t)(\mathscr{F}(p_{1}^{(i,j)})(s_{i})) \\
      & = \mathscr{F}(t)(\mathscr{F}(p_{2}^{(i,j)})(s_{j})) \\
      & = \mathscr{F}(f^{j})(s_{j}).
    \end{align*}
    Therefore we have a well-defined function $\varphi_{T} \colon R(T) \to \mathscr{F}(T)$.
    We check that these are the components of a natural transformation $\varphi \colon R \to \mathscr{F}$.
    Let $g \colon T' \to T$ be a morphism in $\mathbf{C}$.
    We want to show that the diagram
    \begin{center}
      \begin{tikzcd}
        R(T) \arrow{r}{\varphi_{T}} \arrow[swap]{d}{(-) \circ g} & \mathscr{F}(T) \arrow{d}{\mathscr{F}(g)} \\
        R(T') \arrow[swap]{r}{\varphi_{T'}} & \mathscr{F}(T')
      \end{tikzcd}
    \end{center}
    commutes.
    So let $\alpha \in R(T)$ as above and let $i \in I$ and $f^{i} \colon T \to X_{i}$ such that $\alpha = f_{i} \circ f^{i}$.
    Then we have
    \[ \mathscr{F}(g)(\varphi_{T}(\alpha)) = \mathscr{F}(g)(\mathscr{F}(f^{i})(s_{i})) = \mathscr{F}(f^{i}\circ g)(s_{i}). \]
    The morphism $f^{i} \circ g \colon T' \to X_{i}$ is such that $\alpha \circ g= f_{i} \circ (f^{i} \circ g)$.
    Therefore we also have
    \[ \varphi_{T'}(\alpha \circ g) = \mathscr{F}(f^{i} \circ g)(s_{i}), \]
    which shows that the diagram commutes.
    So we have a well-defined natural transformation $\varphi \colon R \to \mathscr{F}$.
    The bijection $\operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F})$ is induced by the inclusion $i \colon R \to X$, whose component at an object $T$ of $\mathbf{C}$ is just the set-theoretical inclusion $i_{T} \colon R(T) \subseteq X(T)$.
    The natural transformation $\varphi$ corresponds under this bijection to the natural transformation $\psi \colon X \to \mathscr{F}$ whose component at $T$ has the property that $\psi_{T} \circ i_{T} = \varphi_{T}$.
    We then consider the section $s := \psi_{X}(\operatorname{id}_{X}) \in \mathscr{F}(X)$.
    The first claim is that $\rho(s) = (s_{i})_{i \in I}$, i.e., that for every $i \in I$ we have $\mathscr{F}(f_{i})(s) = s_{i}$.
    We apply the naturality of $\psi$ to the morphism $f_{i}$ to obtain a commutative diagram as follows:
    \begin{center}
      \begin{tikzcd}
        X(X) \arrow{r}{\psi_{X}} \arrow[swap]{d}{(-) \circ f_{i}} & \mathscr{F}(X) \arrow{d}{\mathscr{F}(f_{i})} \\
        X(X_{i}) \arrow{r}{\psi_{X_{i}}} & \mathscr{F}(X_{i})
      \end{tikzcd}
    \end{center}
    The section $\mathscr{F}(f_{i})(s)$ is then equal to $\psi_{X_{i}}(\operatorname{id}_{X} \circ f_{i}) = \psi_{X_{i}}(f_{i})$.
    Since $f_{i} \in R(X_{i})$ we also have $\psi_{X_{i}}(f_{i}) = \varphi_{X_{i}}(f_{i})$.
    We have $f_{i} = f_{i} \circ \operatorname{id}_{X_{i}}$, so by construction we have $\varphi_{X_{i}}(f_{i}) = \mathscr{F}(\operatorname{id}_{X_{i}})(s_{i})$.
    Since $\mathscr{F}$ is a functor, we finally deduce that $\mathscr{F}(\operatorname{id}_{X_{i}})(s_{i}) = \operatorname{id}_{\mathscr{F}(X_{i})}(s_{i}) = s_{i}$, showing that $\mathscr{F}(f_{i})(s) = s_{i}$ as we wanted.
    The second claim is that any section $s' \in \mathscr{F}(X)$ with the property that $\mathscr{F}(f_{i})(s') = s_{i}$ for all $i \in I$ is equal to $s$.
    Such a section $s' \in \mathscr{F}(X)$ corresponds under Yoneda to a natural transformation $\psi' \colon X \to \mathscr{F}$ such that $\psi'_{X}(\operatorname{id}_{X}) = s'$, and again by Yoneda it suffices to show that $\psi = \psi'$.
    Since $(-) \circ i \colon \operatorname{Hom}(X,\mathscr{F}) \to \operatorname{Hom}(R,\mathscr{F})$ is a bijection, it suffices to show that $\psi' \circ i = \psi \circ i = \varphi$.
    So let $(\alpha \colon T \to X) \in R(T)$.
    We apply the naturality of $\psi'$ to $\alpha \colon T \to X$ to obtain a commutative diagram as follows:
    \begin{center}
      \begin{tikzcd}
        X(X) \arrow{r}{\psi'_{X}} \arrow[swap]{d}{(-) \circ \alpha} & \mathscr{F}(X) \arrow{d}{\mathscr{F}(\alpha)} \\
        X(T) \arrow{r}{\psi'_{T}} & \mathscr{F}(T)
      \end{tikzcd}
    \end{center}
    We see that
    \[ \psi'_{T}(\alpha) = (\psi'_{T} \circ i)(\alpha) = \mathscr{F}(\alpha)(s'). \]
    By definition of $R$ there exists some $i \in I$ and some $f^{i} \colon T \to X_{i}$ such that $\alpha = f_{i} \circ f^{i}$.
    Hence we deduce in turn that
    \[ \psi'_{T}(\alpha) = \mathscr{F}(f^{i})(\mathscr{F}(f_{i})(s')) = \mathscr{F}(f^{i})(s_{i}) = \varphi_{T}(\alpha). \]
    This shows that $\psi' \circ i = \varphi$, hence $s' = s$.
    Therefore there exists a unique section $\mathscr{F}(s)$ such that $\rho(s) = (s_{i})_{i \in I}$ and the presheaf $\mathscr{F}$ is a sheaf in the sense of the pretopology.

    Conversely, suppose that the above sheaf diagram is exact and let $\varphi \colon R \to \mathscr{F}$.
    We want to show that there exists a unique $\psi \colon X \to \mathscr{F}$ such that $\psi \circ i = \varphi$, where $i \colon R \to X$ denotes the inclusion.
    For each $i \in I$ we have $f_{i} \in R(X_{i})$, so we may define $s_{i} := \varphi_{X_{i}}(f_{i}) \in \mathscr{F}(X_{i})$.
    We want to check next that the family $(s_{i})_{i \in I}$ is a compatible family, so let $i, j \in I$.
    We need to show that $\mathscr{F}(p_{1}^{(i,j)})(s_{i}) = \mathscr{F}(p_{2}^{(i,j)})(s_{j})$.
    Applying naturality of $\varphi$ to the morphism $p_{1}^{(i,j)}$ yields a commutative diagram
    \begin{center}
      \begin{tikzcd}
        R(X_{i}) \arrow{r}{\varphi_{X_{i}}} \arrow[swap]{d}{(-) \circ p_{1}^{(i,j)}} & \mathscr{F}(X_{i}) \arrow{d}{\mathscr{F}(p_{1}^{(i,j)})} \\
        R(X_{i} \times_{X} X_{j}) \arrow{r}{\varphi_{X_{i} \times_{X} X_{j}}} & \mathscr{F}(X_{i} \times_{X} X_{j})
      \end{tikzcd}
    \end{center}
    It follows from the commutativity of this diagram and from the commutativity of the corresponding naturality diagram for $p_{2}^{(i,j)}$ that
    \[ \mathscr{F}(p_{1}^{(i,j)})(s_{i}) = \varphi_{X_{i} \times_{X} X_{j}}(f_{i} \circ p_{1}^{(i,j)}) = \varphi_{X_{i} \times_{X} X_{j}}(f_{j} \circ p_{2}^{(i,j)}) = \mathscr{F}(p_{2}^{(i,j)})(s_{j}), \]
    showing that $(s_{i})_{i \in I}$ is indeed a compatible family.
    Therefore there exists a unique $s \in \mathscr{F}(X)$ such that $\mathscr{F}(f_{i})(s) = s_{i}$ for each $i \in I$.
    We claim that the natural transformation $\psi \colon X \to \mathscr{F}$ corresponding to $s$ under Yoneda satisfies $\psi \circ i = \varphi$.
    To show this, let $(\alpha \colon T \to X) \in R(T)$ and let $i \in I$ and $f^{i} \colon T \to X_{i}$ such that $\alpha = f_{i} \circ f^{i}$.
    We need to use the information that we have on $\psi$, namely, that $\psi_{X}(\operatorname{id}_{X}) = s$.
    So we consider the naturality diagram for $\psi$ with respect to $\alpha$:
    \begin{center}
      \begin{tikzcd}
        X(X) \arrow{r}{\psi_{X}} \arrow[swap]{d}{(-) \circ \alpha} & \mathscr{F}(X) \arrow{d}{\mathscr{F}(\alpha)} \\
        X(T) \arrow{r}{\psi_{T}} & \mathscr{F}(T)
      \end{tikzcd}
    \end{center}
    This diagram shows that
    \[ \psi_{T}(\alpha) = \mathscr{F}(\alpha)(s) = \mathscr{F}(f^{i})(\mathscr{F}(f_{i})(s)) = \mathscr{F}(f^{i})(s_{i}) = \mathscr{F}(f^{i})(\varphi_{X_{i}}(f_{i})). \]
    From the naturality of $\varphi$ with respect to $f^{i}$ we deduce now that
    \[ \mathscr{F}(f^{i})(\varphi_{X_{i}}(f_{i})) = \varphi_{T}(f_{i} \circ f^{i}) = \varphi_{T}(\alpha), \]
    hence $\psi \circ i = \varphi$ as we wanted to show.
    Suppose that $\psi' \colon X \to \mathscr{F}$ is another natural transformation with the property that $\psi' \circ i = \varphi$.
    To show that $\psi = \psi'$ it suffices to show that $\psi'_{X}(\operatorname{id}_{X}) = s$.
    In order to show this it suffices in turn to show that for each $i \in I$ we have $\mathscr{F}(f_{i})(\psi'_{X}(\operatorname{id}_{X})) = s_{i}$.
    But naturality of $\psi'$ with respect to $f_{i}$ implies that
    \[ \mathscr{F}(f_{i})(\psi'_{X}(\operatorname{id}_{X})) = \psi'_{X_{i}}(f_{i}) = s_{i}. \]
    This shows that $\psi = \psi'$, so $\psi \colon X \to \mathscr{F}$ is the only natural transformation such that $\psi \circ i = \varphi$.
  \end{proof}
\end{cor}

In this way we recover the notion of sheaf for a pretopology in the context of Grothendieck topologies.
But unlike in the pretopology setting, the notion of sheaf already determines the topology:

\begin{prop}\label{cor:correspondence}
  Let $\mathbf{C}$ be a category.
  Then there is a order-reversing correspondence between topologies on $\mathbf{C}$ and full subcategories of $\mathbf{PSh}(\mathbf{C})$ which are categories of sheaves for some topology on $\mathbf{C}$, given by
  \[ K \mapsto \mathbf{Sh}(\mathbf{C},K) \]
  and
  \[ \mathbf{Sh}(\mathbf{C},K) \mapsto J_{\mathbf{Sh}(\mathbf{C},K)}. \]
  \begin{proof}
    If $K \subseteq K'$, then $\mathbf{Sh}(\mathbf{C},K') \subseteq \mathbf{Sh}(\mathbf{C},K)$.
    Indeed, we need to check less conditions to see that a presheaf $\mathscr{F}$ is a sheaf with respect to $K$than with respect to $K'$, because ``$K'$ has more open covers''.
    Hence the order-reversing part of the statement.

    It remains to show injectivity of $K \mapsto \mathbf{Sh}(\mathbf{C},K)$, for which it suffices to show that $K = J_{\mathbf{Sh}(\mathbf{C},K)}$.
    The inclusion $K \subseteq J_{\mathbf{Sh}(\mathbf{C},K)}$ holds because the right hand side is the finest topology on which all presheaves which are sheaves with respect to $K$ are sheaves.
    To show the other inclusion, one can characterize covering sieves in terms of the sheafification functor.
    Since we have not discussed sheafification in these notes, we refer to \cite[\href{https://stacks.math.columbia.edu/tag/00ZP}{Tag 00ZP}]{stacks-project} for the details.
  \end{proof}
\end{prop}

This correspondence between topologies and categories of sheaves suggests that we can producte a canonical topology on any category $\mathbf{C}$ starting from a canonical collection of presheaves.
This leads to the following:

\begin{defn}[Canonical topology]
  Let $\mathbf{C}$ be a category.
  The \textit{canonical topology} $J_{c}$ on $\mathbf{C}$ is the finest topology on which all representable presheaves are sheaves.
  A topology $J$ on $\mathbf{C}$ is called \textit{subcanonical} if $J \subseteq J_{c}$.
\end{defn}

Therefore a topology $J$ on $\mathbf{C}$ is subcanonical if and only if all representable presheaves are sheaves.
This is the case with most topologies that one encounters in practice.
Non subcanonical topologies include the discrete topology in non trivial categories or Voevodsky's $h$-toplogy on the category of schemes over a base scheme \cite[\href{https://stacks.math.columbia.edu/tag/0EV1}{Tag 0EV1}]{stacks-project}.
See also \cite{hj14}.

\printbibliography
\vfill

\end{document}
